//META{"name":"ZeresPluginLibrary","displayName":"ZeresPluginLibrary","website":"https://github.com/rauenzi/BDPluginLibrary","source":"https://raw.githubusercontent.com/rauenzi/BDPluginLibrary/master/release/0PluginLibrary.plugin.js"}*//

/*@cc_on
@if (@_jscript)
	
	// Offer to self-install for clueless users that try to run this directly.
	var shell = WScript.CreateObject("WScript.Shell");
	var fs = new ActiveXObject("Scripting.FileSystemObject");
	var pathPlugins = shell.ExpandEnvironmentStrings("%APPDATA%\BetterDiscord\plugins");
	var pathSelf = WScript.ScriptFullName;
	// Put the user at ease by addressing them in the first person
	shell.Popup("It looks like you've mistakenly tried to run me directly. \n(Don't do that!)", 0, "I'm a plugin for BetterDiscord", 0x30);
	if (fs.GetParentFolderName(pathSelf) === fs.GetAbsolutePathName(pathPlugins)) {
		shell.Popup("I'm in the correct folder already.", 0, "I'm already installed", 0x40);
	} else if (!fs.FolderExists(pathPlugins)) {
		shell.Popup("I can't find the BetterDiscord plugins folder.\nAre you sure it's even installed?", 0, "Can't install myself", 0x10);
	} else if (shell.Popup("Should I copy myself to BetterDiscord's plugins folder for you?", 0, "Do you need some help?", 0x34) === 6) {
		fs.CopyFile(pathSelf, fs.BuildPath(pathPlugins, fs.GetFileName(pathSelf)), true);
		// Show the user where to put plugins in the future
		shell.Exec("explorer " + pathPlugins);
		shell.Popup("I'm installed!", 0, "Successfully installed", 0x40);
	}
	WScript.Quit();

@else@*/
var ZeresPluginLibrary=function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){e.exports=window.require("fs")},function(e,t){e.exports=window.require("path")},function(e,t){e.exports=window.require("electron")},function(e,t){e.exports=window.require("request")},function(e,t){e.exports=require("process")},function(e,t){e.exports=".plugin-input-group {\n    margin-top: 5px;\n}\n\n.plugin-input-group .button-collapse {\n    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FscXVlXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSItOTUwIDUzMiAxOCAxOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAtOTUwIDUzMiAxOCAxODsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6bm9uZTt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiNGRkZGRkY7c3Ryb2tlLXdpZHRoOjEuNTtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTS05MzIsNTMydjE4aC0xOHYtMThILTkzMnoiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QxIiBwb2ludHM9Ii05MzYuNiw1MzguOCAtOTQxLDU0My4yIC05NDUuNCw1MzguOCAiLz4NCjwvc3ZnPg0K);\n    height: 16px;\n    width: 16px;\n    display: inline-block;\n    vertical-align: bottom;\n    transition: transform .3s ease;\n    transform: rotate(0);\n}\n\n.plugin-input-group .button-collapse.collapsed {\n    transition: transform .3s ease;\n    transform: rotate(-90deg);\n}\n\n.plugin-input-group h2 {\n    font-size: 14px;\n}\n\n.plugin-input-group .plugin-input-group h2 {\n    margin-left: 16px;\n}\n\n.plugin-inputs {\n    height: auto;\n    overflow: hidden;\n    transition: height 300ms cubic-bezier(0.47, 0, 0.745, 0.715);\n}\n\n.plugin-inputs.collapsed {\n    height: 0px;\n}\n\n.file-input {\n\n}\n\n.file-input::-webkit-file-upload-button {\n\tcolor: white;\n\tbackground: #7289DA;\n\toutline: 0;\n\tborder: 0;\n\tpadding: 10px;\n\tvertical-align: top;\n\tmargin-top: -10px;\n\tmargin-left: -10px;\n\tborder-radius: 3px 0 0 3px;\n\tfont-size: 14px;\n    font-weight: 500;\n\tfont-family: Whitney,Helvetica Neue,Helvetica,Arial,sans-serif;\n\tcursor: pointer;\n}\n"},function(e,t){e.exports=".toasts {\n    position: fixed;\n    display: flex;\n    top: 0;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n    pointer-events: none;\n    z-index: 4000;\n}\n\n@keyframes toast-up {\n    from {\n        transform: translateY(0);\n        opacity: 0;\n    }\n}\n\n.toast {\n    animation: toast-up 300ms ease;\n    transform: translateY(-10px);\n    background: #36393F;\n    padding: 10px;\n    border-radius: 5px;\n    box-shadow: 0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2);\n    font-weight: 500;\n    color: #fff;\n    user-select: text;\n    font-size: 14px;\n    opacity: 1;\n    margin-top: 10px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n@keyframes toast-down {\n    to {\n        transform: translateY(0px);\n        opacity: 0;\n    }\n}\n\n.toast.closing {\n    animation: toast-down 200ms ease;\n    animation-fill-mode: forwards;\n    opacity: 1;\n    transform: translateY(-10px);\n}\n\n.toast.toast-info {\n    background-color: #4a90e2;\n}\n\n.toast.toast-success {\n    background-color: #43b581;\n}\n\n.toast.toast-danger,\n.toast.toast-error {\n    background-color: #f04747;\n}\n\n.toast.toast-warning,\n.toast.toast-warn {\n    background-color: #FFA600;\n}\n\n.toast-icon {\n    margin-right: 5px;\n    fill: white;\n    border-radius: 50%;\n    overflow: hidden;\n    height: 20px;\n    width: 20px;\n}\n\n.toast-text {\n    line-height: 20px;\n}"},function(e,t){e.exports="#pluginNotice {\n    -webkit-app-region: drag;\n    border-radius: 0;\n    overflow: hidden;\n    height: 36px;\n    animation: open-updates 400ms ease;\n}\n\n@keyframes open-updates {\n    from { height: 0; }\n}\n\n#pluginNotice.closing {\n    transition: height 400ms ease;\n    height: 0;\n}\n\n#outdatedPlugins {\n    font-weight: 700;\n}\n\n#outdatedPlugins>span {\n    -webkit-app-region: no-drag;\n    color: #fff;\n    cursor: pointer;\n}\n\n#outdatedPlugins>span:hover {\n    text-decoration: underline;\n}"},function(e){e.exports={info:{name:"ZeresPluginLibrary",authors:[{name:"Zerebos",discord_id:"249746236008169473",github_username:"rauenzi",twitter_username:"ZackRauen"}],version:"1.2.11",description:"Gives other plugins utility functions and the ability to emulate v2.",github:"https://github.com/rauenzi/BDPluginLibrary",github_raw:"https://raw.githubusercontent.com/rauenzi/BDPluginLibrary/master/release/0PluginLibrary.plugin.js"},changelog:[{title:"New Stuff",items:["**DiscordContextMenu API** is here for the developers. This should allow developers to easily create and add to context menus."]},{title:"Improvements",type:"improved",items:["**__Markdown__** is now supported in changelog and some other modals.","**Initialization sequence** is now more consistent and better at reloading plugins."]},{title:"Bugs Squashed",type:"fixed",items:["**Leak Plugged.** Fixed some React leakage. (Thanks Lighty)","**Patch patched.** I patched the Patch where the Patch patched too much.","**Better Settings.** Fixed extend function not working properly for arrays."]}],main:"plugin.js"}},function(e,t,n){"use strict";n.r(t),t.default=(e,t)=>{const{PluginUpdater:n,Patcher:r,Logger:s,Settings:i,Toasts:o,PluginUtilities:a,ReactComponents:c}=t,l=class extends e{get Library(){return t}load(){super.load();const e=!!document.getElementById("ZLibraryCSS"),t=document.getElementsByClassName("bd-loaderv2").length;if(a.removeStyle("ZLibraryCSS"),a.addStyle("ZLibraryCSS",i.CSS+o.CSS+n.CSS),c.AutoPatcher.processAll(),c.AutoPatcher.autoPatch(),!e&&t)return;const r=window.settingsCookie["fork-ps-2"];window.settingsCookie["fork-ps-2"]=!1;const s=Object.keys(window.bdplugins).filter(e=>window.bdplugins[e].plugin._config&&"ZeresPluginLibrary"!=e);for(let e=0;e<s.length;e++)window.pluginModule.reloadPlugin(s[e]);window.settingsCookie["fork-ps-2"]=r}static buildPlugin(e){const n=e.info.name,i={Logger:{stacktrace:(e,t)=>s.stacktrace(n,e,t),log:(...e)=>s.log(n,...e),error:(...e)=>s.err(n,...e),err:(...e)=>s.err(n,...e),warn:(...e)=>s.warn(n,...e),info:(...e)=>s.info(n,...e),debug:(...e)=>s.debug(n,...e)},Patcher:{getPatchesByCaller:()=>r.getPatchesByCaller(n),unpatchAll:()=>r.unpatchAll(n),before:(e,t,s,i={})=>r.before(n,e,t,s,i),instead:(e,t,s,i={})=>r.instead(n,e,t,s,i),after:(e,t,s,i={})=>r.after(n,e,t,s,i)}},o=Object.assign({},t);return o.Logger=i.Logger,o.Patcher=i.Patcher,[t.Structs.Plugin(e),o]}};return Object.assign(l,t),t.buildPlugin=l.buildPlugin,window.ZLibrary=t,window.ZLibraryPromise=new Promise(e=>setImmediate(e)),window.ZeresPluginLibrary=l,l}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"CSS",(function(){return It})),n.d(r,"SettingField",(function(){return ut})),n.d(r,"SettingGroup",(function(){return pt})),n.d(r,"SettingPanel",(function(){return ft})),n.d(r,"Textbox",(function(){return yt})),n.d(r,"ColorPicker",(function(){return Ct})),n.d(r,"FilePicker",(function(){return Pt})),n.d(r,"Slider",(function(){return vt})),n.d(r,"Switch",(function(){return St})),n.d(r,"Dropdown",(function(){return Mt})),n.d(r,"Keybind",(function(){return wt})),n.d(r,"RadioGroup",(function(){return Et})),n.d(r,"ReactSetting",(function(){return ht}));var s={};n.r(s),n.d(s,"updateDiscordMenu",(function(){return xt})),n.d(s,"Menu",(function(){return Ot})),n.d(s,"ItemGroup",(function(){return At})),n.d(s,"MenuItem",(function(){return Nt})),n.d(s,"TextItem",(function(){return Bt})),n.d(s,"ImageItem",(function(){return jt})),n.d(s,"SubMenuItem",(function(){return kt})),n.d(s,"ToggleItem",(function(){return Tt}));var i={};n.r(i),n.d(i,"IconError",(function(){return Lt})),n.d(i,"IconInfo",(function(){return Rt})),n.d(i,"IconSuccess",(function(){return Ut})),n.d(i,"IconWarning",(function(){return _t}));var o={};n.r(o),n.d(o,"List",(function(){return f})),n.d(o,"Screen",(function(){return y})),n.d(o,"Selector",(function(){return b})),n.d(o,"ClassName",(function(){return C})),n.d(o,"DOMObserver",(function(){return P})),n.d(o,"InsufficientPermissions",(function(){return S})),n.d(o,"Plugin",(function(){return Zt})),n.d(o,"Listenable",(function(){return dt})),n.d(o,"User",(function(){return re})),n.d(o,"GuildMember",(function(){return ie})),n.d(o,"Role",(function(){return J})),n.d(o,"Emoji",(function(){return X})),n.d(o,"Guild",(function(){return te})),n.d(o,"Channel",(function(){return _})),n.d(o,"PermissionOverwrite",(function(){return D})),n.d(o,"RolePermissionOverwrite",(function(){return G})),n.d(o,"MemberPermissionOverwrite",(function(){return H})),n.d(o,"GuildChannel",(function(){return F})),n.d(o,"GuildTextChannel",(function(){return W})),n.d(o,"GuildVoiceChannel",(function(){return z})),n.d(o,"ChannelCategory",(function(){return V})),n.d(o,"PrivateChannel",(function(){return q})),n.d(o,"DirectMessageChannel",(function(){return Z})),n.d(o,"GroupChannel",(function(){return K})),n.d(o,"Reaction",(function(){return w})),n.d(o,"Embed",(function(){return I})),n.d(o,"Message",(function(){return O})),n.d(o,"DefaultMessage",(function(){return A})),n.d(o,"RecipientAddMessage",(function(){return N})),n.d(o,"RecipientRemoveMessage",(function(){return B})),n.d(o,"CallMessage",(function(){return j})),n.d(o,"GroupChannelNameChangeMessage",(function(){return k})),n.d(o,"GroupChannelIconChangeMessage",(function(){return T})),n.d(o,"MessagePinnedMessage",(function(){return L})),n.d(o,"GuildMemberJoinMessage",(function(){return R})),n.d(o,"UserSettings",(function(){return oe}));var a={};n.r(a),n.d(a,"Utilities",(function(){return d})),n.d(a,"WebpackModules",(function(){return g})),n.d(a,"Filters",(function(){return h})),n.d(a,"DiscordModules",(function(){return u})),n.d(a,"ColorConverter",(function(){return m})),n.d(a,"DOMTools",(function(){return Kt})),n.d(a,"DiscordClasses",(function(){return we})),n.d(a,"DiscordSelectors",(function(){return Pe})),n.d(a,"ReactTools",(function(){return me})),n.d(a,"ReactComponents",(function(){return de})),n.d(a,"DiscordAPI",(function(){return Qt})),n.d(a,"Logger",(function(){return l})),n.d(a,"Patcher",(function(){return ae})),n.d(a,"PluginUpdater",(function(){return qt})),n.d(a,"PluginUtilities",(function(){return lt})),n.d(a,"DiscordClassModules",(function(){return fe})),n.d(a,"Structs",(function(){return o}));const c={err:"error",error:"error",dbg:"debug",debug:"debug",log:"log",warn:"warn",info:"info"};class l{static stacktrace(e,t,n){console.error(`%c[${e}]%c ${t}\n\n%c`,"color: #3a71c1; font-weight: 700;","color: red; font-weight: 700;","color: red;",n)}static err(e,...t){l._log(e,t,"error")}static warn(e,...t){l._log(e,t,"warn")}static info(e,...t){l._log(e,t,"info")}static debug(e,...t){l._log(e,t,"debug")}static log(e,...t){l._log(e,t)}static _log(e,t,n="log"){n=l.parseType(n),Array.isArray(t)||(t=[t]),console[n](`%c[${e}]%c`,"color: #3a71c1; font-weight: 700;","",...t)}static parseType(e){return c.hasOwnProperty(e)?c[e]:"log"}}class d{static stableSort(e,t){const n=Array(length);for(let t=0;t<e.length;t++)n[t]=[t,e[t]];n.sort(function(e,t){return Number(this(e[1],t[1]))||e[0]-t[0]}.bind(t));for(let t=0;t<e.length;t++)e[t]=n[t][1]}static memoizeObject(e){const t=new Proxy(e,{get:function(e,t){if(e.hasOwnProperty(t)){if(Object.getOwnPropertyDescriptor(e,t).get){const n=e[t];delete e[t],e[t]=n}return e[t]}},set:function(e,t,n){return e.hasOwnProperty(t)?l.err("MemoizedObject","Trying to overwrite existing property"):(e[t]=n,e[t])}});return Object.defineProperty(t,"hasOwnProperty",{value:function(e){return void 0!==this[e]}}),t}static suppressErrors(e,t){return(...n)=>{try{return e(...n)}catch(e){l.err("Suppression","Error occurred in "+t,e)}}}static isNil(e){return null==e}static formatTString(e,t){for(const n in t){let r=t[n];Array.isArray(r)&&(r=JSON.stringify(r)),"object"==typeof r&&null!==r&&(r=r.toString()),e=e.replace(new RegExp(`\\$\\{${n}\\}`,"g"),r)}return e}static formatString(e,t){for(const n in t){let r=t[n];Array.isArray(r)&&(r=JSON.stringify(r)),"object"==typeof r&&null!==r&&(r=r.toString()),e=e.replace(new RegExp(`{{${n}}}`,"g"),r)}return e}static findInReactTree(e,t){return this.findInTree(e,t,{walkable:["props","children","child","sibling"]})}static findInTree(e,t,{walkable:n=null,ignore:r=[]}={}){if("string"==typeof t){if(e.hasOwnProperty(t))return e[t]}else if(t(e))return e;if("object"!=typeof e||null==e)return;let s=void 0;if(e instanceof Array){for(const i of e)if(s=this.findInTree(i,t,{walkable:n,ignore:r}),void 0!==s)return s}else{const i=null==n?Object.keys(e):n;for(const o of i)if(e.hasOwnProperty(o)&&!r.includes(o)&&(s=this.findInTree(e[o],t,{walkable:n,ignore:r}),void 0!==s))return s}return s}static getNestedProp(e,t){return t.split(/\s?\.\s?/).reduce((function(e,t){return e&&e[t]}),e)}static className(){const e=[],t={}.hasOwnProperty;for(let n=0;n<arguments.length;n++){const r=arguments[n];if(!r)continue;const s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)&&r.length){const t=this.classNames.apply(null,r);t&&e.push(t)}else if("object"===s)for(const n in r)t.call(r,n)&&r[n]&&e.push(n)}return e.join(" ")}static addToPrototype(e,t,n){if(e.prototype&&!e.prototype[t])return e.prototype[t]=n}static extend(e,...t){for(let n=0;n<t.length;n++)for(const r in t[n])t[n].hasOwnProperty(r)&&(Array.isArray(e[r])&&Array.isArray(t[n][r])?this.extend(e[r],t[n][r]):"object"==typeof e[r]&&"object"==typeof t[n][r]?this.extend(e[r],t[n][r]):Array.isArray(t[n][r])?(e[r]=[],this.extend(e[r],t[n][r])):"object"==typeof t[n][r]?(e[r]={},this.extend(e[r],t[n][r])):e[r]=t[n][r]);return e}static deepclone(e){if("object"==typeof e){if(e instanceof Array)return e.map(e=>this.deepclone(e));const t=Object.assign({},e);for(const e in t)t[e]=this.deepclone(t[e]);return t}return e}static deepfreeze(e,t){if(!t||!t(e)){if("object"==typeof e&&null!==e){const n=Object.getOwnPropertyNames(e);for(const r of n)this.deepfreeze(e[r],t);Object.freeze(e)}return e}}static removeFromArray(e,t,n){let r;for(;(r=n?e.findIndex(t):e.indexOf(t))>-1;)e.splice(r,1);return e}static async fileExists(e){const t=n(0);return new Promise((n,r)=>{t.stat(e,(t,s)=>t?r({message:`No such file or directory: ${t.path}`,err:t}):s.isFile()?void n():r({message:`Not a file: ${e}`,stats:s}))})}static async readFile(e){try{await this.fileExists(e)}catch(e){throw e}const t=n(0);return new Promise((n,r)=>{t.readFile(e,"utf-8",(t,s)=>{if(t)return r({message:`Could not read file: ${e}`,err:t});n(s)})})}}var u=d.memoizeObject({get React(){return g.getByProps("createElement","cloneElement")},get ReactDOM(){return g.getByProps("render","findDOMNode")},get Events(){return g.getByPrototypes("setMaxListeners","emit")},get GuildStore(){return g.getByProps("getGuild")},get SortedGuildStore(){return g.getByProps("getSortedGuilds")},get SelectedGuildStore(){return g.getByProps("getLastSelectedGuildId")},get GuildSync(){return g.getByProps("getSyncedGuilds")},get GuildInfo(){return g.getByProps("getAcronym")},get GuildChannelsStore(){return g.getByProps("getChannels","getDefaultChannel")},get GuildMemberStore(){return g.getByProps("getMember")},get MemberCountStore(){return g.getByProps("getMemberCounts")},get GuildEmojiStore(){return g.getByProps("getEmojis")},get GuildActions(){return g.getByProps("markGuildAsRead")},get GuildPermissions(){return g.getByProps("getGuildPermissions")},get ChannelStore(){return g.getByProps("getChannels","getDMFromUserId")},get SelectedChannelStore(){return g.getByProps("getLastSelectedChannelId")},get ChannelActions(){return g.getByProps("selectChannel")},get PrivateChannelActions(){return g.getByProps("openPrivateChannel")},get ChannelSelector(){return g.getByProps("selectGuild","selectChannel")},get UserInfoStore(){return g.getByProps("getToken")},get UserSettingsStore(){return g.getByProps("guildPositions")},get AccountManager(){return g.getByProps("register","login")},get UserSettingsUpdater(){return g.getByProps("updateRemoteSettings")},get OnlineWatcher(){return g.getByProps("isOnline")},get CurrentUserIdle(){return g.getByProps("getIdleTime")},get RelationshipStore(){return g.getByProps("isBlocked","getFriendIDs")},get RelationshipManager(){return g.getByProps("addRelationship")},get MentionStore(){return g.getByProps("getMentions")},get UserStore(){return g.getByProps("getCurrentUser")},get UserStatusStore(){return g.getByProps("getStatus","getState")},get UserTypingStore(){return g.getByProps("isTyping")},get UserActivityStore(){return g.getByProps("getActivity")},get UserNameResolver(){return g.getByProps("getName")},get UserNoteStore(){return g.getByProps("getNote")},get UserNoteActions(){return g.getByProps("updateNote")},get EmojiInfo(){return g.getByProps("isEmojiDisabled")},get EmojiUtils(){return g.getByProps("getGuildEmoji")},get EmojiStore(){return g.getByProps("getByCategory","EMOJI_NAME_RE")},get InviteStore(){return g.getByProps("getInvites")},get InviteResolver(){return g.getByProps("findInvite")},get InviteActions(){return g.getByProps("acceptInvite")},get DiscordConstants(){return g.getByProps("Permissions","ActivityTypes","StatusTypes")},get DiscordPermissions(){return g.getByProps("Permissions","ActivityTypes","StatusTypes").Permissions},get Permissions(){return g.getByProps("getHighestRole")},get ColorConverter(){return g.getByProps("hex2int")},get ColorShader(){return g.getByProps("darken")},get TinyColor(){return g.getByPrototypes("toRgb")},get ClassResolver(){return g.getByProps("getClass")},get ButtonData(){return g.getByProps("ButtonSizes")},get IconNames(){return g.getByProps("IconNames")},get NavigationUtils(){return g.getByProps("transitionTo","replaceWith","getHistory")},get MessageStore(){return g.getByProps("getMessages")},get MessageActions(){return g.getByProps("jumpToMessage","_sendMessage")},get MessageQueue(){return g.getByProps("enqueue")},get MessageParser(){return g.getByProps("createMessage","parse","unparse")},get OverlayUserPopoutSettings(){return g.getByProps("openUserPopout")},get OverlayUserPopoutInfo(){return g.getByProps("getOpenedUserPopout")},get ExperimentStore(){return g.getByProps("getExperimentOverrides")},get ExperimentsManager(){return g.getByProps("isDeveloper")},get CurrentExperiment(){return g.getByProps("getExperimentId")},get ImageResolver(){return g.getByProps("getUserAvatarURL","getGuildIconURL")},get ImageUtils(){return g.getByProps("getSizedImageSrc")},get AvatarDefaults(){return g.getByProps("getUserAvatarURL","DEFAULT_AVATARS")},get DNDActions(){return g.getByProps("beginDrag")},get DNDSources(){return g.getByProps("addTarget")},get DNDObjects(){return g.getByProps("DragSource")},get ElectronModule(){return g.getByProps("setBadge")},get Dispatcher(){return g.getByProps("dirtyDispatch")},get PathUtils(){return g.getByProps("hasBasename")},get NotificationModule(){return g.getByProps("showNotification")},get RouterModule(){return g.getByProps("Router")},get APIModule(){return g.getByProps("getAPIBaseURL")},get AnalyticEvents(){return g.getByProps("AnalyticEventConfigs")},get KeyGenerator(){return g.getByRegex(/"binary"/)},get Buffers(){return g.getByProps("Buffer","kMaxLength")},get DeviceStore(){return g.getByProps("getDevices")},get SoftwareInfo(){return g.getByProps("os")},get CurrentContext(){return g.getByProps("setTagsContext")},get MediaDeviceInfo(){return g.getByProps("Codecs","SUPPORTED_BROWSERS")},get MediaInfo(){return g.getByProps("getOutputVolume")},get MediaEngineInfo(){return g.getByProps("MediaEngineFeatures")},get VoiceInfo(){return g.getByProps("EchoCancellation")},get VideoStream(){return g.getByProps("getVideoStream")},get SoundModule(){return g.getByProps("playSound")},get WindowInfo(){return g.getByProps("isFocused","windowSize")},get TagInfo(){return g.getByProps("VALID_TAG_NAMES")},get DOMInfo(){return g.getByProps("canUseDOM")},get LocaleManager(){return g.getByProps("setLocale")},get Moment(){return g.getByProps("parseZone")},get LocationManager(){return g.getByProps("createLocation")},get Timestamps(){return g.getByProps("fromTimestamp")},get Strings(){return g.getByProps("Messages").Messages},get StringFormats(){return g.getByProps("a","z")},get StringUtils(){return g.getByProps("toASCII")},get URLParser(){return g.getByProps("Url","parse")},get ExtraURLs(){return g.getByProps("getArticleURL")},get hljs(){return g.getByProps("highlight","highlightBlock")},get SimpleMarkdown(){return g.getByProps("parseBlock","parseInline","defaultOutput")},get LayerManager(){return g.getByProps("popLayer","pushLayer")},get Tooltips(){return g.find(e=>e.hide&&e.show&&!e.search&&!e.submit&&!e.search&&!e.activateRagingDemon&&!e.dismiss)},get UserSettingsWindow(){return g.getByProps("open","updateAccount")},get ChannelSettingsWindow(){return g.getByProps("open","updateChannel")},get GuildSettingsWindow(){return g.getByProps("open","updateGuild")},get ModalStack(){return g.getByProps("push","update","pop","popWithKey")},get UserProfileModals(){return g.getByProps("fetchMutualFriends","setSection")},get AlertModal(){return g.getByPrototypes("handleCancel","handleSubmit","handleMinorConfirm")},get ConfirmationModal(){return g.getModule(e=>e.defaultProps&&e.key&&"confirm-modal"==e.key())},get UserProfileModal(){return g.find(e=>{try{return e.modalConfig&&"FluxContainer(Component)"==e.prototype.render().type.displayName}catch(e){return!1}})},get ChangeNicknameModal(){return g.getByProps("open","changeNickname")},get CreateChannelModal(){return g.getByProps("open","createChannel")},get PruneMembersModal(){return g.getByProps("open","prune")},get NotificationSettingsModal(){return g.getByProps("open","updateNotificationSettings")},get PrivacySettingsModal(){return g.getByRegex(/PRIVACY_SETTINGS_MODAL_OPEN/,e=>e.open)},get CreateInviteModal(){return g.getByProps("open","createInvite")},get Changelog(){return g.getModule(e=>e.defaultProps&&0==e.defaultProps.selectable)},get Avatar(){return g.find(e=>{if("FluxContainer(t)"!=e.displayName)return!1;try{const t=new e;return t.state&&t.state.hasOwnProperty("isFocused")}catch(e){return!1}})},get PopoutStack(){return g.getByProps("open","close","closeAll")},get PopoutOpener(){return g.getByProps("openPopout")},get EmojiPicker(){return g.getByDisplayName("FluxContainer(EmojiPicker)")},get UserPopout(){return g.getByDisplayName("FluxContainer(ForwardRef(SubscribeGuildMembersContainer(UserPopout)))")},get ContextMenuActions(){return g.getByProps("openContextMenu")},get ContextMenuItemsGroup(){return g.getByRegex(/itemGroup/)},get ContextMenuItem(){return g.getByRegex(/\.label\b.*\.hint\b.*\.action\b/)},get ExternalLink(){return g.getByRegex(/trusted/)},get TextElement(){return g.getByProps("Sizes","Weights")},get FlexChild(){return g.getByProps("Child")},get Titles(){return g.getByProps("Tags","default")},get SettingsWrapper(){return g.getByDisplayName("FormItem")},get SettingsNote(){return g.getByDisplayName("FormText")},get SettingsDivider(){return g.getModule(e=>!e.defaultProps&&e.prototype&&e.prototype.render&&e.prototype.render.toString().includes("default.divider"))},get ColorPicker(){return g.getByPrototypes("renderCustomColorPopout")},get Dropdown(){return g.getModule(e=>e.prototype&&!e.prototype.handleClick&&e.prototype.render&&e.prototype.render.toString().includes("default.select"))},get Keybind(){return g.getByPrototypes("handleComboChange")},get RadioGroup(){return g.getModule(e=>e.defaultProps&&e.defaultProps.options&&e.defaultProps.size)},get Slider(){return g.getByPrototypes("renderMark")},get SwitchRow(){return g.getModule(e=>e.defaultProps&&0==e.defaultProps.hideBorder)},get Textbox(){return g.getModule(e=>e.defaultProps&&"text"==e.defaultProps.type)}});class h{static byProperties(e,t=(e=>e)){return n=>{const r=t(n);return!!r&&e.every(e=>void 0!==r[e])}}static byPrototypeFields(e,t=(e=>e)){return n=>{const r=t(n);return!!r&&(!!r.prototype&&e.every(e=>void 0!==r.prototype[e]))}}static byCode(e,t=(e=>e)){return n=>{const r=t(n);return!!r&&-1!==r.toString([]).search(e)}}static byString(...e){return t=>{const n=t.toString([]);for(const t of e)if(!n.includes(t))return!1;return!0}}static byDisplayName(e){return t=>t&&t.displayName===e}static combine(...e){return t=>e.every(e=>e(t))}}class g{static find(e,t=!0){return this.getModule(e,t)}static findAll(e){return this.getModule(e,!1)}static findByUniqueProperties(e,t=!0){return t?this.getByProps(...e):this.getAllByProps(...e)}static findByDisplayName(e){return this.getByDisplayName(e)}static getModule(e,t=!0){const n=this.getAllModules(),r=[];for(const s in n){if(!n.hasOwnProperty(s))continue;const i=n[s],{exports:o}=i;let a=null;if(o&&(o.__esModule&&o.default&&e(o.default)&&(a=o.default),e(o)&&(a=o),a)){if(t)return a;r.push(a)}}return t||0==r.length?void 0:r}static getIndex(e){const t=this.getAllModules();for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],{exports:s}=r;let i=null;if(s&&(s.__esModule&&s.default&&e(s.default)&&(i=s.default),e(s)&&(i=s),i))return n}return null}static getIndexByModule(e){return this.getIndex(t=>t==e)}static getModules(e){return this.getModule(e,!1)}static getModuleByName(e,t){if(u.hasOwnProperty(e))return u[e];if(!t)return;const n=this.getModule(t,!0);return n?u[e]=n:void 0}static getByDisplayName(e){return this.getModule(h.byDisplayName(e),!0)}static getByRegex(e,t=!0){return this.getModule(h.byCode(e),t)}static getByPrototypes(...e){return this.getModule(h.byPrototypeFields(e),!0)}static getAllByPrototypes(...e){return this.getModule(h.byPrototypeFields(e),!1)}static getByProps(...e){return this.getModule(h.byProperties(e),!0)}static getAllByProps(...e){return this.getModule(h.byProperties(e),!1)}static getByString(...e){return this.getModule(h.byString(...e),!0)}static getAllByString(...e){return this.getModule(h.byString(...e),!1)}static getByIndex(e){return g.require.c[e].exports}static get require(){if(this._require)return this._require;const e="zl-webpackmodules",t="function"==typeof window.webpackJsonp?window.webpackJsonp([],{[e]:(e,t,n)=>t.default=n},[e]).default:window.webpackJsonp.push([[],{[e]:(e,t,n)=>e.exports=n},[[e]]]);return delete t.m[e],delete t.c[e],this._require=t}static getAllModules(){return this.require.c}}const p=g.getByProps("getDarkness","isValidHex");class m{static getDarkness(e){return p.getDarkness(e)}static hex2int(e){return p.hex2int(e)}static hex2rgb(e){return p.hex2rgb(e)}static int2hex(e){return p.int2hex(e)}static int2rgba(e,t){return p.int2rgba(e,t)}static isValidHex(e){return p.isValidHex(e)}static getRGB(e){let t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e);return t?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*\)/.exec(e),t?[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]:(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e),t?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:void 0)))}static darkenColor(e,t){const n=this.getRGB(e);for(let e=0;e<n.length;e++)n[e]=Math.round(Math.max(0,n[e]-n[e]*(t/100)));return"rgb("+n[0]+","+n[1]+","+n[2]+")"}static lightenColor(e,t){const n=this.getRGB(e);for(let e=0;e<n.length;e++)n[e]=Math.round(Math.min(255,n[e]+n[e]*(t/100)));return"rgb("+n[0]+","+n[1]+","+n[2]+")"}static rgbToAlpha(e,t){const n=this.getRGB(e);return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"}}var f=class extends Array{constructor(){super(...arguments)}get(...e){return this.find(t=>{for(const n of e)for(const e in n)if(n.hasOwnProperty(e)&&t[e]!==n[e])return!1;return!0})}};var y=class{static get width(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}static get height(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}};var b=class{constructor(e){this.value=" ."+e.split(" ").join(".")}toString(){return this.value}valueOf(){return this.value}selector(e,t){return this.value=`${this.toString()} ${e} ${t.toString()}`,this}child(e){return this.selector(">",e)}adjacent(e){return this.selector("+",e)}sibling(e){return this.selector("~",e)}descend(e){return this.selector(" ",e)}and(e){return this.selector(",",e)}};var C=class{constructor(e){this.value=e}add(...e){for(let t=0;t<e.length;t++)this.value+=" "+e[t];return this}toString(){return this.value}valueOf(){return this.value}get selector(){return new b(this.value)}get single(){return this.value.split(" ")[0]}get first(){return this.value.split(" ")[0]}};var P=class{constructor(e,t){this.observe=this.observe.bind(this),this.subscribe=this.subscribe.bind(this),this.observerCallback=this.observerCallback.bind(this),this.active=!1,this.root=e||document.getElementById("app-mount"),this.options=t||{attributes:!0,childList:!0,subtree:!0},this.observer=new MutationObserver(this.observerCallback),this.observe()}observerCallback(e){for(const t of Array.from(this.subscriptions))try{const n=t.filter?e.filter(t.filter):e;if(t.group){if(!n.length)continue;t.callback.call(t.bind||t,n)}else for(const e of n)t.callback.call(t.bind||t,e)}catch(e){l.stacktrace("DOMObserver","Error in observer callback",e)}}observe(){this.active||(this.observer.observe(this.root,this.options),this.active=!0)}disconnect(){this.active&&(this.observer.disconnect(),this.active=!1)}reconnect(){this.active&&(this.disconnect(),this.observe())}get root(){return this._root}set root(e){this._root=e,this.reconnect()}get options(){return this._options}set options(e){this._options=e,this.reconnect()}get subscriptions(){return this._subscriptions||(this._subscriptions=[])}subscribe(e,t,n,r){const s={callback:e,filter:t,bind:n,group:r};return this.subscriptions.push(s),this.observe(),s}unsubscribe(e){this.subscriptions.includes(e)||(e=this.subscriptions.find(t=>t.callback===e)),d.removeFromArray(this.subscriptions,e),this.subscriptions.length||this.disconnect()}unsubscribeAll(){this.subscriptions.splice(0,this.subscriptions.length),this.disconnect()}subscribeToQuerySelector(e,t,n,r){return this.subscribe(e,e=>e.target.matches(t)||Array.from(e.addedNodes).concat(Array.from(e.removedNodes)).find(e=>e instanceof Element&&(e.matches(t)||e.querySelector(t))),n,r)}};class v extends Error{constructor(e){super(e),this.name="PermissionsError"}}class S extends v{constructor(e){super(`Missing Permission â€” ${e}`),this.name="InsufficientPermissions"}}const M=new WeakMap;class w{constructor(e,t,n){if(M.has(e))return M.get(e);M.set(e,this),this.discordObject=e,this.messageId=t,this.channelId=n}get emoji(){const e=this.discordObject.emoji.id;return e&&this.guild?this.guild.emojis.find(t=>t.id===e):this.discordObject.emoji}get count(){return this.discordObject.count}get me(){return this.discordObject.me}get channel(){return _.fromId(this.channel_id)}get message(){if(this.channel)return this.channel.messages.find(e=>e.id===this.messageId)}get guild(){if(this.channel)return this.channel.guild}}const E=new WeakMap;class I{constructor(e,t,n){if(E.has(e))return E.get(e);E.set(e,this),this.discordObject=e,this.messageId=t,this.channelId=n}get title(){return this.discordObject.title}get type(){return this.discordObject.type}get description(){return this.discordObject.description}get url(){return this.discordObject.url}get timestamp(){return this.discordObject.timestamp}get colour(){return this.discordObject.color}get footer(){return this.discordObject.footer}get image(){return this.discordObject.image}get thumbnail(){return this.discordObject.thumbnail}get video(){return this.discordObject.video}get provider(){return this.discordObject.provider}get author(){return this.discordObject.author}get fields(){return this.discordObject.fields}get channel(){return _.fromId(this.channelId)}get message(){if(this.channel)return this.channel.messages.find(e=>e.id===this.messageId)}get guild(){if(this.channel)return this.channel.guild}}const x=new WeakMap;class O{constructor(e){if(x.has(e))return x.get(e);x.set(e,this),this.discordObject=e}static from(e){switch(e.type){default:return new O(e);case 0:return new A(e);case 1:return new N(e);case 2:return new B(e);case 3:return new j(e);case 4:return new k(e);case 5:return new T(e);case 6:return new L(e);case 7:return new R(e)}}static get DefaultMessage(){return A}static get RecipientAddMessage(){return N}static get RecipientRemoveMessage(){return B}static get CallMessage(){return j}static get GroupChannelNameChangeMessage(){return k}static get GroupChannelIconChangeMessage(){return T}static get MessagePinnedMessage(){return L}static get GuildMemberJoinMessage(){return R}static get Reaction(){return w}static get Embed(){return I}get id(){return this.discordObject.id}get channelId(){return this.discordObject.channel_id}get nonce(){return this.discordObject.nonce}get type(){return this.discordObject.type}get timestamp(){return this.discordObject.timestamp}get state(){return this.discordObject.state}get nick(){return this.discordObject.nick}get colourString(){return this.discordObject.colorString}get author(){if(this.discordObject.author&&!this.webhookId)return re.from(this.discordObject.author)}get channel(){return _.fromId(this.channelId)}get guild(){if(this.channel)return this.channel.guild}delete(){if(!this.isDeletable)throw new Error(`Message type ${this.type} is not deletable.`);if(this.author!==Qt.currentUser)if(this.channel.assertPermissions)this.channel.assertPermissions("MANAGE_MESSAGES",u.DiscordPermissions.MANAGE_MESSAGES);else if(!this.channel.owner===Qt.currentUser)throw new S("MANAGE_MESSAGES");return u.APIModule.delete(`${u.DiscordConstants.Endpoints.MESSAGES(this.channelId)}/${this.id}`)}get isDeletable(){return"DEFAULT"===this.type||"CHANNEL_PINNED_MESSAGE"===this.type||"GUILD_MEMBER_JOIN"===this.type}jumpTo(e=!0){u.MessageActions.jumpToMessage(this.channelId,this.id,e)}}class A extends O{get webhookId(){return this.discordObject.webhookId}get type(){return"DEFAULT"}get content(){return this.discordObject.content}get contentParsed(){return this.discordObject.contentParsed}get inviteCodes(){return this.discordObject.invites}get attachments(){return this.discordObject.attachments}get mentionIds(){return this.discordObject.mentions}get mentionRoleIds(){return this.discordObject.mentionRoles}get mentionEveryone(){return this.discordObject.mentionEveryone}get editedTimestamp(){return this.discordObject.editedTimestamp}get tts(){return this.discordObject.tts}get mentioned(){return this.discordObject.mentioned}get bot(){return this.discordObject.bot}get blocked(){return this.discordObject.blocked}get pinned(){return this.discordObject.pinned}get activity(){return this.discordObject.activity}get application(){return this.discordObject.application}get webhook(){if(this.webhookId)return this.discordObject.author}get mentions(){return f.from(this.mentionIds,e=>re.fromId(e))}get mention_roles(){return f.from(this.mentionRoleIds,e=>this.guild.roles.find(t=>t.id===e))}get embeds(){return f.from(this.discordObject.embeds,e=>new I(e,this.id,this.channelId))}get reactions(){return f.from(this.discordObject.reactions,e=>new w(e,this.id,this.channelId))}get edited(){return!!this.editedTimestamp}async edit(e,t=!1){if(this.author!==Qt.currentUser)throw new Error("Cannot edit messages sent by other users.");e=t?u.MessageParser.parse(this.discordObject,e):{content:e};const n=await u.APIModule.patch({url:`${u.DiscordConstants.Endpoints.MESSAGES(this.channelId)}/${this.id}`,body:e});this.discordObject=u.MessageStore.getMessage(this.id,n.body.id),x.set(this.discordObject,this)}startEdit(e){if(this.author!==Qt.currentUser)throw new Error("Cannot edit messages sent by other users.");u.MessageActions.startEditMessage(this.channelId,this.id,e||this.content)}endEdit(){u.MessageActions.endEditMessage()}}class N extends O{get type(){return"RECIPIENT_ADD"}get addedUserId(){return this.discordObject.mentions[0]}get addedUser(){return re.fromId(this.addedUserId)}}class B extends O{get type(){return"RECIPIENT_REMOVE"}get removedUserId(){return this.discordObject.mentions[0]}get removedUser(){return re.fromId(this.removedUserId)}get userLeft(){return this.author===this.removedUser}}class j extends O{get type(){return"CALL"}get mentionIds(){return this.discordObject.mentions}get call(){return this.discordObject.call}get endedTimestamp(){return this.call.endedTimestamp}get mentions(){return f.from(this.mentionIds,e=>re.fromId(e))}get participants(){return f.from(this.call.participants,e=>re.fromId(e))}}class k extends O{get type(){return"CHANNEL_NAME_CHANGE"}get newName(){return this.discordObject.content}}class T extends O{get type(){return"CHANNEL_ICON_CHANGE"}}class L extends O{get type(){return"CHANNEL_PINNED_MESSAGE"}}class R extends O{get type(){return"GUILD_MEMBER_JOIN"}}const U=new WeakMap;class _{constructor(e){if(U.has(e))return U.get(e);U.set(e,this),this.discordObject=e}static from(e){switch(e.type){default:return new _(e);case 0:return new W(e);case 1:return new Z(e);case 2:return new z(e);case 3:return new K(e);case 4:return new V(e)}}static fromId(e){const t=u.ChannelStore.getChannel(e);if(t)return _.from(t)}static get GuildChannel(){return F}static get GuildTextChannel(){return W}static get GuildVoiceChannel(){return z}static get ChannelCategory(){return V}static get PrivateChannel(){return q}static get DirectMessageChannel(){return Z}static get GroupChannel(){return K}get id(){return this.discordObject.id}get applicationId(){return this.discordObject.application_id}get type(){return this.discordObject.type}get name(){return this.discordObject.name}async sendMessage(e,t=!1){this.assertPermissions&&this.assertPermissions("SEND_MESSAGES",u.DiscordPermissions.VIEW_CHANNEL|u.DiscordPermissions.SEND_MESSAGES),this.select(),e=t?u.MessageParser.parse(this.discordObject,e):{content:e};const n=await u.MessageActions._sendMessage(this.id,e);return O.from(u.MessageStore.getMessage(this.id,n.body.id))}sendBotMessage(e){this.select();const t=u.MessageParser.createBotMessage(this.id,e);return u.MessageActions.receiveMessage(this.id,t),O.from(u.MessageStore.getMessage(this.id,t.id))}get messages(){const e=u.MessageStore.getMessages(this.id).toArray();return f.from(e,e=>O.from(e))}jumpToPresent(){this.assertPermissions&&this.assertPermissions("VIEW_CHANNEL",u.DiscordPermissions.VIEW_CHANNEL),this.hasMoreAfter?u.MessageActions.jumpToPresent(this.id,u.DiscordConstants.MAX_MESSAGES_PER_CHANNEL):this.messages[this.messages.length-1].jumpTo(!1)}get hasMoreAfter(){return u.MessageStore.getMessages(this.id).hasMoreAfter}async sendInvite(e){this.assertPermissions&&this.assertPermissions("SEND_MESSAGES",u.DiscordPermissions.VIEW_CHANNEL|u.DiscordPermissions.SEND_MESSAGES);const t=u.MessageActions.sendInvite(this.id,e);return O.from(u.MessageStore.getMessage(this.id,t.body.id))}select(){this.assertPermissions&&this.assertPermissions("VIEW_CHANNEL",u.DiscordPermissions.VIEW_CHANNEL),u.NavigationUtils.transitionToGuild(this.guildId?this.guildId:u.DiscordConstants.ME,this.id)}get isSelected(){return Qt.currentChannel===this}async updateChannel(e){this.assertPermissions&&this.assertPermissions("MANAGE_CHANNELS",u.DiscordPermissions.MANAGE_CHANNELS),await u.APIModule.patch({url:`${u.DiscordConstants.Endpoints.CHANNELS}/${this.id}`,body:e}),this.discordObject=u.ChannelStore.getChannel(this.id),U.set(this.discordObject,this)}}class D{constructor(e,t){this.discordObject=e,this.channelId=t}static from(e,t){switch(e.type){default:return new D(e,t);case"role":return new G(e,t);case"member":return new H(e,t)}}static get RolePermissionOverwrite(){return G}static get MemberPermissionOverwrite(){return H}get type(){return this.discordObject.type}get allow(){return this.discordObject.allow}get deny(){return this.discordObject.deny}get channel(){return _.fromId(this.channelId)}get guild(){if(this.channel)return this.channel.guild}}class G extends D{get roleId(){return this.discordObject.id}get role(){if(this.guild)return this.guild.roles.find(e=>e.id===this.roleId)}}class H extends D{get memberId(){return this.discordObject.id}get member(){return ie.fromId(this.memberId)}}class F extends _{static get PermissionOverwrite(){return D}get guildId(){return this.discordObject.guild_id}get parentId(){return this.discordObject.parent_id}get position(){return this.discordObject.position}get nicks(){return this.discordObject.nicks}checkPermissions(e){return u.Permissions.can(e,Qt.currentUser,this.discordObject)}assertPermissions(e,t){if(!this.checkPermissions(t))throw new S(e)}get category(){return _.fromId(this.parentId)}get permissions(){return u.GuildPermissions.getChannelPermissions(this.id)}get permissionOverwrites(){return f.from(Object.values(this.discordObject.permissionOverwrites),e=>D.from(e,this.id))}get guild(){return te.fromId(this.guildId)}get isDefaultChannel(){return u.GuildChannelsStore.getDefaultChannel(this.guildId).id===this.id}openSettings(e="OVERVIEW"){u.ChannelSettingsWindow.setSection(e),u.ChannelSettingsWindow.open(this.id)}updateName(e){return this.updateChannel({name:e})}changeSortLocation(e=0){return e instanceof F&&(e=e.position),this.updateChannel({position:e})}updatePermissionOverwrites(e){return this.updateChannel({permission_overwrites:e})}updateCategory(e){return this.updateChannel({parent_id:e.id||e})}}class W extends F{get type(){return"GUILD_TEXT"}get topic(){return this.discordObject.topic}get nsfw(){return this.discordObject.nsfw}updateTopic(e){return this.updateChannel({topic:e})}setNsfw(e=!0){return this.updateChannel({nsfw:e})}setNotNsfw(){return this.setNswf(!1)}}class z extends F{get type(){return"GUILD_VOICE"}get userLimit(){return this.discordObject.userLimit}get bitrate(){return this.discordObject.bitrate}sendMessage(){throw new Error("Cannot send messages in a voice channel.")}get messages(){return new f}jumpToPresent(){throw new Error("Cannot select a voice channel.")}get hasMoreAfter(){return!1}sendInvite(){throw new Error("Cannot invite someone to a voice channel.")}select(){throw new Error("Cannot select a voice channel.")}updateBitrate(e){return this.updateChannel({bitrate:e})}updateUserLimit(e){return this.updateChannel({user_limit:e})}}class V extends F{get type(){return"GUILD_CATEGORY"}get parentId(){}get category(){}sendMessage(){throw new Error("Cannot send messages in a channel category.")}get messages(){return new f}jumpToPresent(){throw new Error("Cannot select a channel category.")}get hasMoreAfter(){return!1}sendInvite(){throw new Error("Cannot invite someone to a channel category.")}select(){throw new Error("Cannot select a channel category.")}updateCategory(){throw new Error("Cannot set a channel category on another channel category.")}get channels(){return f.from(this.guild.channels,e=>e.parentId===this.id)}openCreateChannelModal(e,t,n){this.guild.openCreateChannelModal(e,this.id,this,n)}createChannel(e,t,n){return this.guild.createChannel(e,t,this,n)}}class q extends _{get userLimit(){return this.discordObject.userLimit}get bitrate(){return this.discordObject.bitrate}}class Z extends q{get type(){return"DM"}get recipientId(){return this.discordObject.recipients[0]}get recipient(){return re.fromId(this.recipientId)}}class K extends q{get ownerId(){return this.discordObject.ownerId}get type(){return"GROUP_DM"}get name(){return this.discordObject.name}get icon(){return this.discordObject.icon}get members(){return f.from(this.discordObject.recipients,e=>re.fromId(e))}get owner(){return re.fromId(this.ownerId)}updateName(e){return this.updateChannel({name:e})}}const Q=new WeakMap;class J{constructor(e,t){if(Q.has(e))return Q.get(e);Q.set(e,this),this.discordObject=e,this.guildId=t}get id(){return this.discordObject.id}get name(){return this.discordObject.name}get position(){return this.discordObject.position}get originalPosition(){return this.discordObject.originalPosition}get permissions(){return this.discordObject.permissions}get managed(){return this.discordObject.managed}get mentionable(){return this.discordObject.mentionable}get hoist(){return this.discordObject.hoist}get colour(){return this.discordObject.color}get colourString(){return this.discordObject.colorString}get guild(){return te.fromId(this.guildId)}get members(){return this.guild.members.filter(e=>e.roles.includes(this))}}const Y=new WeakMap;class X{constructor(e){if(Y.has(e))return Y.get(e);Y.set(e,this),this.discordObject=e}get id(){return this.discordObject.id}get guildId(){return this.discordObject.guild_id}get name(){return this.discordObject.name}get managed(){return this.discordObject.managed}get animated(){return this.discordObject.animated}get allNamesString(){return this.discordObject.allNamesString}get requireColons(){return this.discordObject.require_colons}get url(){return this.discordObject.url}get roles(){return this.discordObject.roles}get guild(){return te.fromId(this.guildId)}}const ee=new WeakMap;class te{constructor(e){if(ee.has(e))return ee.get(e);ee.set(e,this),this.discordObject=e}static from(e){return new te(e)}static fromId(e){const t=u.GuildStore.getGuild(e);if(t)return te.from(t)}static get Role(){return J}static get Emoji(){return X}get id(){return this.discordObject.id}get ownerId(){return this.discordObject.ownerId}get applicationId(){return this.discordObject.application_id}get systemChannelId(){return this.discordObject.systemChannelId}get name(){return this.discordObject.name}get acronym(){return this.discordObject.acronym}get icon(){return this.discordObject.icon}get joinedAt(){return this.discordObject.joinedAt}get verificationLevel(){return this.discordObject.verificationLevel}get mfaLevel(){return this.discordObject.mfaLevel}get large(){return this.discordObject.large}get lazy(){return this.discordObject.lazy}get voiceRegion(){return this.discordObject.region}get afkChannelId(){return this.discordObject.afkChannelId}get afkTimeout(){return this.discordObject.afkTimeout}get explicitContentFilter(){return this.discordObject.explicitContentFilter}get defaultMessageNotifications(){return this.discordObject.defaultMessageNotifications}get splash(){return this.discordObject.splash}get features(){return this.discordObject.features}get owner(){return this.members.find(e=>e.userId===this.ownerId)}get roles(){return f.from(Object.values(this.discordObject.roles),e=>new J(e,this.id)).sort((e,t)=>e.position===t.position?0:e.position>t.position?1:-1)}get channels(){const e=u.GuildChannelsStore.getChannels(this.id),t=new f;for(const n in e)if(e.hasOwnProperty(n)){if(!Array.isArray(e[n]))continue;const r=e[n];for(const e of r)"null"!==e.channel.id&&t.push(_.from(e.channel))}return t}get mainChannels(){return this.channels.filter(e=>!e.parentId)}get defaultChannel(){return _.from(u.GuildChannelsStore.getDefaultChannel(this.id))}get afkChannel(){if(this.afkChannelId)return _.fromId(this.afkChannelId)}get systemChannel(){if(this.systemChannelId)return _.fromId(this.systemChannelId)}get members(){const e=u.GuildMemberStore.getMembers(this.id);return f.from(e,e=>new ie(e,this.id))}get currentUser(){return this.members.find(e=>e.user===Qt.currentUser)}get memberCount(){return u.MemberCountStore.getMemberCount(this.id)}get emojis(){return f.from(u.EmojiUtils.getGuildEmoji(this.id),e=>new X(e))}checkPermissions(e){return u.Permissions.can(e,Qt.currentUser,this.discordObject)}assertPermissions(e,t){if(!this.checkPermissions(t))throw new S(e)}get permissions(){return u.GuildPermissions.getGuildPermissions(this.id)}getMember(e){const t=u.GuildMemberStore.getMember(this.id,e);if(t)return new ie(t,this.id)}isMember(e){return u.GuildMemberStore.isMember(this.id,e)}get allowPrivateMessages(){return!Qt.UserSettings.restrictedGuildIds.includes(this.id)}markAsRead(){u.GuildActions.markGuildAsRead(this.id)}select(){u.GuildActions.selectGuild(this.id)}get isSelected(){return Qt.currentGuild===this}openSettings(e="OVERVIEW"){u.GuildSettingsWindow.setSection(e),u.GuildSettingsWindow.open(this.id)}pruneMembers(e){this.assertPermissions("KICK_MEMBERS",u.DiscordPermissions.KICK_MEMBERS),u.PruneMembersModal.prune(this.id,e)}openPruneMumbersModal(){this.assertPermissions("KICK_MEMBERS",u.DiscordPermissions.KICK_MEMBERS),u.PruneMembersModal.open(this.id)}openCreateChannelModal(e,t,n){this.assertPermissions("MANAGE_CHANNELS",u.DiscordPermissions.MANAGE_CHANNELS),u.CreateChannelModal.open(e,this.id,t?t.id:void 0,n?n.id:void 0)}async createChannel(e,t,n,r){this.assertPermissions("MANAGE_CHANNELS",u.DiscordPermissions.MANAGE_CHANNELS);const s=await u.APIModule.post({url:u.DiscordConstants.Endpoints.GUILD_CHANNELS(this.id),body:{type:e,name:t,parent_id:n?n.id:void 0,permission_overwrites:r?r.map(e=>({type:e.type,id:("user"===e.type?e.userId:e.roleId)||e.id,allow:e.allow,deny:e.deny})):void 0}});return _.fromId(s.body.id)}openNotificationSettingsModal(){u.NotificationSettingsModal.open(this.id)}openPrivacySettingsModal(){u.PrivacySettingsModal.open(this.id)}nsfwAgree(){u.GuildActions.nsfwAgree(this.id)}nsfwDisagree(){u.GuildActions.nsfwDisagree(this.id)}changeSortLocation(e){u.GuildActions.move(Qt.guildPositions.indexOf(this.id),e)}async updateGuild(e){this.assertPermissions("MANAGE_GUILD",u.DiscordPermissions.MANAGE_GUILD),await u.GuildSettingsWindow.saveGuild(this.id,e),this.discordObject=u.GuildStore.getGuild(this.id),ee.set(this.discordObject,this)}updateName(e){return this.updateGuild({name:e})}updateVoiceRegion(e){return this.updateGuild({region:e})}updateVerificationLevel(e){return this.updateGuild({verification_level:e})}updateDefaultMessageNotifications(e){return this.updateGuild({default_message_notifications:e})}updateExplicitContentFilter(e){return this.updateGuild({explicit_content_filter:e})}updateAfkChannel(e){return this.updateGuild({afk_channel_id:e.id||e})}updateAfkTimeout(e){return this.updateGuild({afk_timeout:e})}updateIcon(e){return this.updateGuild({icon:"string"==typeof e?e:e.toString("base64")})}async updateIconFromFile(e){const t=await d.readFileBuffer(e);return this.updateIcon(t)}updateOwner(e){return this.updateGuild({owner_id:e.user?e.user.id:e.id||e})}updateSplash(e){return this.updateGuild({splash:"string"==typeof e?e:e.toString("base64")})}async updateSplashFromFile(e){const t=await d.readFileBuffer(e);return this.updateSplash(t)}updateSystemChannel(e){return this.updateGuild({system_channel_id:e.id||e})}}const ne=new WeakMap;class re{constructor(e){if(ne.has(e))return ne.get(e);ne.set(e,this),this.discordObject=e}static from(e){return new re(e)}static fromId(e){const t=u.UserStore.getUser(e);if(t)return re.from(t)}get id(){return this.discordObject.id}get username(){return this.discordObject.username}get usernameLowerCase(){return this.discordObject.usernameLowerCase}get discriminator(){return this.discordObject.discriminator}get avatar(){return this.discordObject.avatar}get email(){}get phone(){}get flags(){return this.discordObject.flags}get isBot(){return this.discordObject.bot}get premium(){return this.discordObject.premium}get verified(){return this.discordObject.verified}get mfaEnabled(){return this.discordObject.mfaEnabled}get mobile(){return this.discordObject.mobile}get tag(){return this.discordObject.tag}get avatarUrl(){return this.discordObject.avatarURL}get createdAt(){return this.discordObject.createdAt}get isClamied(){return this.discordObject.isClaimed()}get isLocalBot(){return this.discordObject.isLocalBot()}get isPhoneVerified(){return this.discordObject.isPhoneVerified()}get guilds(){return Qt.guilds.filter(e=>e.members.find(e=>e.user===this))}get status(){return u.UserStatusStore.getStatus(this.id)}get activity(){return u.UserStatusStore.getActivity(this.id)}get note(){const e=u.UserNoteStore.getNote(this.id);if(e)return e}updateNote(e){return u.APIModule.put({url:`${u.DiscordConstants.Endpoints.NOTES}/${this.id}`,body:{note:e}})}get privateChannel(){return Qt.channels.find(e=>"DM"===e.type&&e.recipientId===this.id)}async ensurePrivateChannel(){if(Qt.currentUser===this)throw new Error("Cannot create a direct message channel to the current user.");return _.fromId(await u.PrivateChannelActions.ensurePrivateChannel(Qt.currentUser.id,this.id))}async sendMessage(e,t=!0){return(await this.ensurePrivateChannel()).sendMessage(e,t)}get isFriend(){return u.RelationshipStore.isFriend(this.id)}get isBlocked(){return u.RelationshipStore.isBlocked(this.id)}addFriend(){u.RelationshipManager.addRelationship(this.id,{location:"Context Menu"})}removeFriend(){u.RelationshipManager.removeRelationship(this.id,{location:"Context Menu"})}block(){u.RelationshipManager.addRelationship(this.id,{location:"Context Menu"},u.DiscordConstants.RelationshipTypes.BLOCKED)}unblock(){u.RelationshipManager.removeRelationship(this.id,{location:"Context Menu"})}openUserProfileModal(e="USER_INFO"){u.UserProfileModal.open(this.id),u.UserProfileModal.setSection(e)}}const se=new WeakMap;class ie{constructor(e,t){if(se.has(e))return se.get(e);se.set(e,this),this.discordObject=e,this.guildId=t}get userId(){return this.discordObject.userId}get nickname(){return this.discordObject.nick}get colourString(){return this.discordObject.colorString}get hoistRoleId(){return this.discordObject.hoistRoleId}get roleIds(){return this.discordObject.roles}get user(){return re.fromId(this.userId)}get name(){return this.nickname||this.user.username}get guild(){return te.fromId(this.guildId)}get roles(){return f.from(this.roleIds,e=>this.guild.roles.find(t=>t.id===e)).sort((e,t)=>e.position===t.position?0:e.position>t.position?1:-1)}get hoistRole(){return this.guild.roles.find(e=>e.id===this.hoistRoleId)}checkPermissions(e){return u.Permissions.can(e,Qt.currentUser.discordObject,this.guild.discordObject)}assertPermissions(e,t){if(!this.checkPermissions(t))throw new S(e)}openChangeNicknameModal(){Qt.currentUser===this.user?this.assertPermissions("CHANGE_NICKNAME",u.DiscordPermissions.CHANGE_NICKNAME):this.assertPermissions("MANAGE_NICKNAMES",u.DiscordPermissions.MANAGE_NICKNAMES),u.ChangeNicknameModal.open(this.guildId,this.userId)}changeNickname(e){return Qt.currentUser===this.user?this.assertPermissions("CHANGE_NICKNAME",u.DiscordPermissions.CHANGE_NICKNAME):this.assertPermissions("MANAGE_NICKNAMES",u.DiscordPermissions.MANAGE_NICKNAMES),u.APIModule.patch({url:`${u.DiscordConstants.Endpoints.GUILD_MEMBERS(this.guild_id)}/${Qt.currentUser===this.user?"@me/nick":this.userId}`,body:{nick:e}})}kick(e=""){return this.assertPermissions("KICK_MEMBERS",u.DiscordPermissions.KICK_MEMBERS),u.GuildActions.kickUser(this.guildId,this.userId,e)}ban(e=1,t=""){return this.assertPermissions("BAN_MEMBERS",u.DiscordPermissions.BAN_MEMBERS),u.GuildActions.banUser(this.guildId,this.userId,e,t)}unban(){return this.assertPermissions("BAN_MEMBERS",u.DiscordPermissions.BAN_MEMBERS),u.GuildActions.unbanUser(this.guildId,this.userId)}move(e){this.assertPermissions("MOVE_MEMBERS",u.DiscordPermissions.MOVE_MEMBERS),u.GuildActions.setChannel(this.guildId,this.userId,e.id)}mute(e=!0){this.assertPermissions("MUTE_MEMBERS",u.DiscordPermissions.MUTE_MEMBERS),u.GuildActions.setServerMute(this.guildId,this.userId,e)}unmute(){this.mute(!1)}deafen(e=!0){this.assertPermissions("DEAFEN_MEMBERS",u.DiscordPermissions.DEAFEN_MEMBERS),u.GuildActions.setServerDeaf(this.guildId,this.userId,e)}undeafen(){this.deafen(!1)}addRole(...e){const t=this.roleIds.concat([]);let n=!1;for(let r of e)t.includes(r.id||r)||(t.push(r.id||r),n=!0);if(n)return this.updateRoles(t)}removeRole(...e){const t=this.roleIds.concat([]);let n=!1;for(let r of e)t.includes(r.id||r)&&(d.removeFromArray(t,r.id||r),n=!0);if(n)return this.updateRoles(t)}updateRoles(e){return e=e.map(e=>e.id||e),u.APIModule.patch({url:`${u.DiscordConstants.Endpoints.GUILD_MEMBERS(this.guildId)}/${this.userId}`,body:{roles:e}})}}class oe{static open(e="ACCOUNT"){u.UserSettingsWindow.setSection(e),u.UserSettingsWindow.open()}static get status(){return u.UserSettingsStore.status}static get explicitContentFilter(){return u.UserSettingsStore.explicitContentFilter}static get defaultGuildsRestricted(){return u.UserSettingsStore.defaultGuildsRestricted}static get restrictedGuildIds(){return u.UserSettingsStore.restrictedGuilds}static get restrictedGuilds(){return f.from(this.restrictedGuildIds,e=>te.fromId(e)||e)}static get friendSourceFlags(){return Object.keys(u.UserSettingsStore.friendSourceFlags)}static get friendSourceEveryone(){return this.friend_source_flags.include("all")}static get friendSourceMutual_friends(){return this.friend_source_flags.include("all")||this.friend_source_flags.include("mutual_friends")}static get friendSourceMutual_guilds(){return this.friend_source_flags.include("all")||this.friend_source_flags.include("mutual_guilds")}static get friendSourceAnyone(){return this.friend_source_flags.length>0}static get detectPlatformAccounts(){return u.UserSettingsStore.detectPlatformAccounts}static get afkTimeout(){return u.UserSettingsStore.afkTimeout}static get showCurrentGame(){return u.UserSettingsStore.showCurrentGame}static get inlineAttachmentMedia(){return u.UserSettingsStore.inlineAttachmentMedia}static get inlineEmbedMedia(){return u.UserSettingsStore.inlineEmbedMedia}static get autoplayGifs(){return u.UserSettingsStore.gifAutoPlay}static get showEmbeds(){return u.UserSettingsStore.renderEmbeds}static get showReactions(){return u.UserSettingsStore.renderReactions}static get animateEmoji(){return u.UserSettingsStore.animateEmoji}static get convertEmoticons(){return u.UserSettingsStore.convertEmoticons}static get allowTts(){return u.UserSettingsStore.enableTTSCommand}static get theme(){return u.UserSettingsStore.theme}static get displayCompact(){return u.UserSettingsStore.messageDisplayCompact}static get developerMode(){return u.UserSettingsStore.developerMode}static get locale(){return u.UserSettingsStore.locale}static get timezoneOffset(){return u.UserSettingsStore.timezoneOffset}}class ae{static get patches(){return this._patches||(this._patches=[])}static getPatchesByCaller(e){if(!e)return[];const t=[];for(const n of this.patches)for(const r of n.children)r.caller===e&&t.push(r);return t}static unpatchAll(e){"string"==typeof e&&(e=this.getPatchesByCaller(e));for(const t of e)t.unpatch()}static resolveModule(e){return e instanceof Function||e instanceof Object&&!(e instanceof Array)?e:"string"==typeof e?u[e]:e instanceof Array?g.findByUniqueProperties(e):null}static makeOverride(e){return function(){let t=void 0;if(!e.children||!e.children.length)return e.originalFunction.apply(this,arguments);for(const t of e.children.filter(e=>"before"===e.type))try{t.callback(this,arguments)}catch(n){l.err("Patcher",`Could not fire before callback of ${e.functionName} for ${t.caller}`,n)}const n=e.children.filter(e=>"instead"===e.type);if(n.length)for(const r of n)try{const n=r.callback(this,arguments,e.originalFunction.bind(this));void 0!==n&&(t=n)}catch(t){l.err("Patcher",`Could not fire instead callback of ${e.functionName} for ${r.caller}`,t)}else t=e.originalFunction.apply(this,arguments);for(const n of e.children.filter(e=>"after"===e.type))try{const e=n.callback(this,arguments,t);void 0!==e&&(t=e)}catch(t){l.err("Patcher",`Could not fire after callback of ${e.functionName} for ${n.caller}`,t)}return t}}static rePatch(e){e.proxyFunction=e.module[e.functionName]=this.makeOverride(e)}static makePatch(e,t,n){const r={name:n,module:e,functionName:t,originalFunction:e[t],proxyFunction:null,revert:()=>{r.module[r.functionName]=r.originalFunction,r.proxyFunction=null,r.children=[]},counter:0,children:[]};return r.proxyFunction=e[t]=this.makeOverride(r),Object.assign(e[t],r.originalFunction),e[t].__originalFunction=r.originalFunction,e[t].toString=()=>r.originalFunction.toString(),this.patches.push(r),r}static before(e,t,n,r,s={}){return this.pushChildPatch(e,t,n,r,Object.assign(s,{type:"before"}))}static after(e,t,n,r,s={}){return this.pushChildPatch(e,t,n,r,Object.assign(s,{type:"after"}))}static instead(e,t,n,r,s={}){return this.pushChildPatch(e,t,n,r,Object.assign(s,{type:"instead"}))}static pushChildPatch(e,t,n,r,s={}){const{type:i="after",forcePatch:o=!0}=s,a=this.resolveModule(t);if(!a)return null;if(!a[n]&&o&&(a[n]=function(){}),!(a[n]instanceof Function))return null;"string"==typeof t&&(s.displayName=t);const c=`${s.displayName||a.displayName||a.name||a.constructor.displayName||a.constructor.name}.${n}`,l=this.patches.find(e=>e.module==a&&e.functionName==n)||this.makePatch(a,n,c);l.proxyFunction||this.rePatch(l);const d={caller:e,type:i,id:l.counter,callback:r,unpatch:()=>{if(l.children.splice(l.children.findIndex(e=>e.id===d.id&&e.type===i),1),l.children.length<=0){const e=this.patches.findIndex(e=>e.module==a&&e.functionName==n);if(e<0)return;this.patches[e].revert(),this.patches.splice(e,1)}}};return l.children.push(d),l.counter++,d.unpatch}}class ce{static get plannedActions(){return this._plannedActions||(this._plannedActions=new Map)}static recursiveArray(e,t,n=1){let r=0;return function*e(t,s){const i=t[s];if(i instanceof Array)for(const t of i.keys())yield*e(i,t);else yield{item:i,parent:t,key:s,index:r++,count:n}}(e,t)}static recursiveArrayCount(e,t){let n=0;for(let{}of this.recursiveArray(e,t))++n;return this.recursiveArray(e,t,n)}static get recursiveChildren(){return function*(e,t,n=0,r=1){const s=e[t];if(yield{item:s,parent:e,key:t,index:n,count:r},s&&s.props&&s.props.children)for(const{parent:e,key:t,index:n,count:r}of this.recursiveArrayCount(s.props,"children"))yield*this.recursiveChildren(e,t,n,r)}}static returnFirst(e,t){for(const n of e){const e=t(n);if(void 0!==e)return e}}static getFirstChild(e,t,n){const r=(e,t)=>{if(e&&e.props&&e.props.children)return this.returnFirst(this.recursiveArrayCount(e.props,"children"),s.bind(null,t))},s=(e,{item:t,parent:n,key:s,count:i,index:o})=>{let a=!0;if(e.type&&(a=t&&e.type===t.type),a&&e.tag&&(a=t&&"string"==typeof t.type&&e.tag===t.type),a&&e.className&&(a=t&&t.props&&"string"==typeof t.props.className,a)){const n=t.props.className.split(" ");a=!0===e.className?!!n[0]:"string"==typeof e.className?n.includes(e.className):e.className instanceof RegExp&&!!n.find(t=>e.className.test(t))}if(a&&e.text&&(a=!0===e.text?"string"==typeof t:"string"==typeof e.text?t===e.text:e.text instanceof RegExp&&("string"==typeof t&&e.text.test(t))),a&&e.nthChild&&(a=o===(e.nthChild<0?i+e.nthChild:e.nthChild)),a&&e.hasChild&&(a=r(t,e.hasChild)),a&&e.hasSuccessor&&(a=t&&!!this.getFirstChild(n,s,e.hasSuccessor).item),!a||!e.eq)return a?e.child?r(t,e.child):e.successor?this.getFirstChild(n,s,e.successor):{item:t,parent:n,key:s}:void 0;--e.eq};return this.returnFirst(this.recursiveChildren(e,t),s.bind(null,n))||{}}static parseSelector(e){return e.startsWith(".")?{className:e.substr(1)}:e.startsWith("#")?{id:e.substr(1)}:{}}static findByProp(e,t,n){if(e.hasOwnProperty(t)&&e[t]===n)return e;if(e.props&&!e.children)return this.findByProp(e.props,t,n);if(!e.children)return null;if(!(e.children instanceof Array))return this.findByProp(e.children,t,n);for(const r of e.children){if(!r)continue;const e=this.findByProp(r,t,n);if(e)return e}return null}static findProp(e,t){if(e.hasOwnProperty(t))return e[t];if(e.props&&!e.children)return this.findProp(e.props,t);if(!e.children)return null;if(!(e.children instanceof Array))return this.findProp(e.children,t);for(const n of e.children){if(!n)continue;const e=this.findProp(n,t);if(e)return e}return null}static get React(){return u.React}static get ReactDOM(){return u.ReactDOM}}class le{constructor(e,t,n,r){this.id=e,this.component=t,this.selector=n,this.filter=r}forceUpdateAll(){if(this.selector)for(const e of document.querySelectorAll(this.selector))pe(e).forceUpdate(this)}}class de{static get components(){return this._components||(this._components=[])}static get unknownComponents(){return this._unknownComponents||(this._unknownComponents=[])}static get listeners(){return this._listeners||(this._listeners=[])}static get nameSetters(){return this._nameSetters||(this._nameSetters=[])}static get ReactComponent(){return le}static get Helpers(){return ce}static get AutoPatcher(){return ue}static push(e,t,n){if(!(e instanceof Function))return null;const{displayName:r}=e;if(!r)return this.processUnknown(e);const s=this.components.find(e=>e.id===r);if(s)return s.selector||(s.selector=t),s.filter||(s.filter=n),e;const i=new le(r,e,t,n);this.components.push(i);const o=this.listeners.find(e=>e.id===r);if(o){for(const e of o.listeners)e(i);d.removeFromArray(this.listeners,o)}return i}static async getComponentByName(e,t){return this.getComponent(e,t,t=>t.displayName==e)}static async getComponent(e,t,n){const r=this.components.find(t=>t.id===e);if(r)return r;if(t){const r=()=>{if(this.components.find(t=>t.id===e))return void Kt.observer.unsubscribe(s);const r=document.querySelectorAll(t);if(!r.length)return;let i,o;for(const e of r)if(o=pe(e),i=n?o.components.find(n):o.component,i)break;!i&&n||(Kt.observer.unsubscribe(s),i&&(i.displayName||(i.displayName=e),this.push(i,t,n)))},s=Kt.observer.subscribeToQuerySelector(r,t,null,!0);setTimeout(r,0)}let s=this.listeners.find(t=>t.id===e);return s||this.listeners.push(s={id:e,listeners:[],filter:n}),new Promise(e=>{s.listeners.push(e)})}static setName(e,t){const n=this.components.find(t=>t.id===e);if(n)return n;for(const[n,r]of this.unknownComponents.entries())if(t(r.component))return r.component.displayName=e,this.unknownComponents.splice(n,1),this.push(r.component);return this.nameSetters.push({name:e,filter:t})}static processUnknown(e){const t=this.unknownComponents.find(t=>t.component===e);for(const[t,n]of this.nameSetters.entries())if(n.filter.filter(e))return e.displayName=n.name,this.nameSetters.splice(t,1),this.push(e);return t||(this.unknownComponents.push(e),e)}static*recursiveComponents(e=me.rootInstance){e.stateNode&&(yield e.stateNode),e.sibling&&(yield*this.recursiveComponents(e.sibling)),e.child&&(yield*this.recursiveComponents(e.child))}}class ue{static async autoPatch(){this.autoUnpatch(),ae.before("ReactComponents",u.React,"createElement",(e,[t])=>de.push(t)),ae.instead("ReactComponents",u.React.Component.prototype,"UNSAFE_componentWillMount",e=>de.push(e)),ae.instead("ReactComponents",u.React.Component.prototype,"componentWillMount",e=>de.push(e))}static async autoUnpatch(){ae.unpatchAll("ReactComponents")}static processAll(){for(const e of de.recursiveComponents())de.push(e.constructor)}}class he{static reactInternalInstance(e){if(!e)return null;if(!Object.keys(e)||!Object.keys(e).length)return null;const t=Object.keys(e).find(e=>e.startsWith("__reactInternalInstance"));return t?e[t]:null}static findProp(e,t){const n=this.reactInternalInstance(e);if(!n)return null;const r=this.findInReturn(n,t);if(r)return r;const s=this.findInChildProps(n,t);return s||null}static findInReturn(e,t){const n=e.return;if(!n)return null;let r=this.findMemoizedProp(n,t);return r||(r=this.findMemoizedState(n,t),r||this.findInReturn(n,t))}static findMemoizedProp(e,t){return e.hasOwnProperty("memoizedProps")?(e=e.memoizedProps,this.findPropIn(e,t)):null}static findMemoizedState(e,t){return e.hasOwnProperty("memoizedState")?(e=e.memoizedState,this.findPropIn(e,t)):null}static findInChildProps(e,t){try{const n=e.children||e.memoizedProps.children;return n.props&&n.props.hasOwnProperty(t)?n.props[t]:null}catch(e){return null}}static findPropIn(e,t){if(e&&!(e instanceof Array)&&e instanceof Object&&e.hasOwnProperty(t))return e[t];if(e&&e instanceof Array){const n=e.find(e=>{if(e.props&&e.props.hasOwnProperty(t))return!0});if(n)return n}return null}static propIterator(e,t){if(null==e)return null;const n=t.shift(1);if(!e.hasOwnProperty(n))return null;const r=e[n];return 0===t.length?r:this.propIterator(r,t)}static getState(e){const t=this.getStateNode(e);if(t)return t.state}static getStateNode(e){return this.getStateNodes(e)[0]}static getStateNodes(e){const t=[];let n=this.reactInternalInstance(e);for(;n&&n.return&&!(n.return.stateNode instanceof HTMLElement);)n.return.stateNode&&t.push(n.return.stateNode),n=n.return;return t}static getComponentStateNode(e,t){t instanceof de.ReactComponent&&(t=t.component);for(const n of this.getStateNodes(e))if(n instanceof t)return n}static findStateNode(e,t,n=!0){return this.getStateNodes(e)[n?"find":"filter"](t)}static getComponent(e){return this.getComponents(e)[0]}static getComponents(e){const t=[];let n=this.reactInternalInstance(e);for(;n&&n.return&&"string"!=typeof n.return.type;)n.return.type&&t.push(n.return.type),n=n.return;return t}static findComponent(e,t,n=!0){return this.getComponents(e)[n?"find":"filter"](t)}}const ge={get:(e,t)=>he.findProp(e,t)};var pe=function(e){return new class{constructor(e){"string"==typeof e&&(e=document.querySelector(e)),this.node=e instanceof window.jQuery?e[0]:e}get el(){return this.node}get element(){return this.node}get reactInternalInstance(){return he.reactInternalInstance(this.node)}get props(){return new Proxy(this.node,ge)}get state(){return he.getState(this.node)}get stateNode(){return he.getStateNode(this.node)}get stateNodes(){return he.getStateNodes(this.node)}getComponentStateNode(e){return he.getComponentStateNode(this.node,e)}findStateNode(e){return"function"==typeof e?he.findStateNode(this.node,e):e?he.getComponentStateNode(this.node,e):he.getStateNode(this.node)}get component(){return he.getComponent(this.node)}get components(){return he.getComponents(this.node)}getComponentByProps(e,t){return he.findComponent(this.node,h.byProperties(e,t))}getComponentByPrototypes(e,t){return he.findComponent(this.node,h.byPrototypeFields(e,t))}getComponentByRegex(e,t){return he.findComponent(this.node,h.byCode(e,t))}getComponentByDisplayName(e){return he.findComponent(this.node,h.byDisplayName(e))}forceUpdate(e){try{const t=this.findStateNode(e);if(!t||!t.forceUpdate)return;t.forceUpdate()}catch(e){l.err("Reflection",e)}}prop(e){const t=e.split("."),n=he.findProp(this.node,t[0]);return 1===t.length?n:he.propIterator(n,t.slice(1))}}(e)};class me{static Reflect(e){return pe(e)}static get rootInstance(){return document.getElementById("app-mount")._reactRootContainer._internalRoot.current}static getReactInstance(e){if(!(e instanceof window.jQuery||e instanceof Element))return;const t=e instanceof window.jQuery?e[0]:e;return t[Object.keys(t).find(e=>e.startsWith("__reactInternalInstance"))]}static getReactProperty(e,t){return d.getNestedProp(this.getReactInstance(e),t)}static getOwnerInstance(e,{include:t,exclude:n=["Popout","Tooltip","Scroller","BackgroundFlash"],filter:r=(e=>e)}={}){if(void 0===e)return;const s=void 0===t,i=s?n:t;function o(e){const t=function(e){const t=e.type;return t&&(t.displayName||t.name)||null}(e);return null!==t&&!!(i.includes(t)^s)}let a=this.getReactInstance(e);for(a=a&&a.return;!d.isNil(a);a=a.return){if(d.isNil(a))continue;const e=a.stateNode;if(!d.isNil(e)&&!(e instanceof HTMLElement)&&o(a)&&r(e))return e}return null}static createWrappedElement(e){return Array.isArray(e)&&(e=Kt.wrap(e)),u.React.createElement(this.wrapElement(e))}static wrapElement(e){return Array.isArray(e)&&(e=Kt.wrap(e)),class extends u.React.Component{constructor(t){super(t),this.element=e}componentDidMount(){this.refs.element.appendChild(this.element)}render(){return u.React.createElement("div",{className:"react-wrapper",ref:"element"})}}}}var fe=d.memoizeObject({get ContextMenu(){return g.getByProps("itemToggle")},get Scrollers(){return g.getByProps("scrollerWrap","scrollerThemed","scrollerTrack")},get AccountDetails(){return g.getByProps("container","avatar","hasBuildOverride")},get Typing(){return g.getByProps("typing","text")},get UserPopout(){return g.getByProps("userPopout")},get PopoutRoles(){return g.getByProps("roleCircle")},get UserModal(){return g.getByProps("profileBadge")},get Textarea(){return g.getByProps("channelTextArea","textArea")},get Popouts(){return g.getByProps("popouts")},get Titles(){return g.getByProps("defaultMarginh5")},get Notices(){return g.getByProps("noticeInfo")},get Backdrop(){return g.getByProps("backdrop")},get Modals(){return g.getModule(e=>e.modal&&e.inner&&!e.header)},get AuditLog(){return g.getByProps("userHook")},get ChannelList(){return Object.assign({},g.getByProps("containerDefault"),g.getByProps("name","unread"),g.getByProps("sidebar","hasNotice"))},get MemberList(){return Object.assign({},g.getByProps("member","memberInner"),g.getByProps("members","membersWrap"))},get TitleWrap(){return g.getByProps("titleWrapper")},get Titlebar(){return g.getByProps("titleBar")},get Embeds(){return g.getByProps("embed","embedAuthor")},get Layers(){return g.getByProps("layers","layer")},get TooltipLayers(){return g.getByProps("layerContainer","layer")},get Margins(){return g.getModule(e=>!e.title&&e.marginBottom40&&e.marginTop40)},get Dividers(){return Object.assign({},g.getByProps("dividerDefault"),g.getModule(e=>1==Object.keys(e).length&&e.divider))},get Changelog(){return Object.assign({},g.getByProps("container","added"),g.getByProps("content","modal","size"))},get BasicInputs(){return g.getByProps("inputDefault")},get Messages(){return g.getByProps("message","containerCozy")},get Guilds(){return g.getByProps("guildsWrapper")},get EmojiPicker(){return g.getByProps("emojiPicker","emojiItem")},get Reactions(){return g.getByProps("reaction","reactionInner")},get Checkbox(){return g.getByProps("checkbox","checkboxInner")},get Tooltips(){return g.getByProps("tooltip","tooltipBlack")}});const ye=function(e){return this.hasOwnProperty(e)?`.${this[e].split(" ").join(".")}`:""},be=function(e){return this.hasOwnProperty(e)?`.${this[e].split(" ")[0]}`:""},Ce=new Proxy(fe,{get:function(e,t){return"getSelectorAll"==t||"getSelector"==t?(e,n)=>Ce[e][t]([n]):void 0===e[t]?new Proxy({},{get:function(){return""}}):new Proxy(e[t],{get:function(e,t){return"getSelectorAll"==t?ye.bind(e):"getSelector"==t?be.bind(e):e.hasOwnProperty(t)?new Kt.Selector(e[t]):""}})}});var Pe=Ce;const ve=function(e){return this.hasOwnProperty(e)?this[e]:""},Se=function(e){return this.hasOwnProperty(e)?this[e].split(" ")[0]:""},Me=new Proxy(fe,{get:function(e,t){return"getRaw"==t||"getClass"==t?(e,n)=>Me[e][t]([n]):void 0===e[t]?new Proxy({},{get:function(){return""}}):new Proxy(e[t],{get:function(e,t){return"getRaw"==t?ve.bind(e):"getClass"==t?Se.bind(e):e.hasOwnProperty(t)?new Kt.ClassName(e[t]):""}})}});var we=Me;const Ee=u.React,Ie=Ee.createElement;class xe extends Ee.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?Ie("div",{className:"error"},"Component Error"):this.props.children}}function Oe(e){return class extends Ee.Component{render(){return Ie(xe,null,Ie(e,this.props))}}}const Ae=u.React;class Ne extends Ae.Component{static get defaultProps(){return{className:we.ContextMenu.contextMenu,config:{},position:"right",align:"top",theme:"dark"}}render(){return Ae.createElement("div",Object.assign({},Ne.defaultProps,this.props))}}var Be=Oe(Ne);const je=u.React,ke=g.getByString("className","itemGroup");class Te extends je.Component{render(){const e=ke?ke.default||ke:null;return je.createElement(e,this.props,this.props.children||this.props.items)}}var Le=Oe(Te);const Re=u.React,Ue=u.ContextMenuActions,_e=g.getByRegex(/\.label\b.*\.hint\b.*\.action\b/);class De extends Re.Component{handleClick(e){this.props.onClick&&this.props.onClick(e),this.props.action&&this.props.action(e),this.props.closeOnClick&&Ue.closeContextMenu()}render(){const e=_e?_e.default||_e:null;return Re.createElement(e,Object.assign({},this.props,{action:this.handleClick.bind(this)}))}}var Ge=Oe(De);const He=u.React,Fe=u.ContextMenuActions,$e=g.getByDisplayName("ImageMenuItem");class We extends He.Component{handleClick(){this.props.active=!this.props.active,this.props.onClick&&this.props.onClick(this.props.active),this.props.action&&this.props.action(this.props.active),this.props.closeOnClick&&Fe.closeContextMenu(),this.forceUpdate()}render(){const e=$e?$e.default||$e:null;return He.createElement(e,Object.assign({},this.props,{action:this.handleClick.bind(this)}))}}var ze=Oe(We);const Ve=u.React,qe=g.getByString("itemToggle","checkbox");class Ze extends Ve.Component{handleToggle(){this.props.active=!this.props.active,this.props.action&&this.props.action(this.props.active),this.forceUpdate()}render(){const e=qe?qe.default||qe:null;return Ve.createElement(e,Object.assign({},this.props,{action:this.handleToggle.bind(this)}))}}var Ke=Oe(Ze);const Qe=u.React,Je=u.ContextMenuActions,Ye=g.find(e=>e.default&&e.default.displayName&&e.default.displayName.includes("SubMenuItem"));class Xe extends Qe.Component{handleClick(e){this.props.onClick&&this.props.onClick(e),this.props.action&&this.props.action(e),this.props.closeOnClick&&Je.closeContextMenu()}render(){const e=Ye?Ye.default||Ye:null;return Qe.createElement(e,Object.assign({},this.props,{render:this.props.render||this.props.items,action:this.handleClick.bind(this)}))}}var et=Oe(Xe);const tt=u.React,nt=g.getByDisplayName("SliderMenuItem");class rt extends tt.Component{onChange(e){this.props.onChange&&this.props.onChange(e),this.props.onValueChange&&this.props.onValueChange(e)}render(){const e=this.props.renderValue||this.props.onValueRender||void 0,t=nt?nt.default||nt:null;return tt.createElement(t,Object.assign({},this.props,{onValueChange:this.onChange.bind(this),onValueRender:e}))}}var st=Oe(rt);const it=u.React,ot=u.ContextMenuActions,at=it.createElement;class ct{static get ContextMenu(){return Be}static get ItemGroup(){return Le}static get MenuItem(){return Ge}static get ToggleMenuItem(){return Ke}static get SubMenuItem(){return et}static get ImageMenuItem(){return ze}static get SliderMenuItem(){return st}static buildMenuItem(e){const{type:t}=e;let n=Ge;return"image"===t?n=ze:"submenu"===t?(n=et,e.render||(e.render=this.buildMenuChildren(e.render||e.items))):"toggle"===t?n=Ke:"slider"===t&&(n=st),at(n,e)}static buildMenuChildren(e){const t=e=>"group"===e.type?n(e):this.buildMenuItem(e),n=function(e){const n=e.items.map(t).filter(e=>e);return at(Le,null,n)};return e.map(t).filter(e=>e)}static buildMenu(e){return t=>at(Be,t,this.buildMenuChildren(e))}static openContextMenu(e,t,n){return ot.openContextMenu(e,(function(e){return at(t,e)}),n)}static async getDiscordMenu(e){return new Promise(t=>{const n=ae.after("ZeresLibrary.DiscordContextMenu",ot,"openContextMenu",(r,[,s])=>{const i=s(),o=i.props&&i.props.type||i.type&&i.type.displayName;if(o&&"string"==typeof o&&o.includes(e))return n(),t(g.getModule(e=>e.default==i.type))})})}static forceUpdateMenus(){const e=document.querySelectorAll(Pe.ContextMenu.contextMenu);for(const t of e){const e=d.findInTree(me.getReactInstance(t),e=>e&&e.forceUpdate&&e.updatePosition,{walkable:["return","stateNode"]});e&&(e.forceUpdate(),e.updatePosition())}}}class lt{static loadData(e,t,n){try{return d.extend(n||{},BdApi.getData(e,t))}catch(t){l.err(e,"Unable to load data: ",t)}}static saveData(e,t,n){try{BdApi.setData(e,t,n)}catch(t){l.err(e,"Unable to save data: ",t)}}static loadSettings(e,t){return this.loadData(e,"settings",t)}static saveSettings(e,t){this.saveData(e,"settings",t)}static getBDFolder(e=""){const t=n(4),r=n(1);if(t.env.injDir)return r.resolve(t.env.injDir,e);switch(t.platform){case"win32":return r.resolve(t.env.appdata,"BetterDiscord/",e);case"darwin":return r.resolve(t.env.HOME,"Library/Preferences/","BetterDiscord/",e);default:return r.resolve(t.env.XDG_CONFIG_HOME?t.env.XDG_CONFIG_HOME:t.env.HOME+"/.config","BetterDiscord/",e)}}static getPluginsFolder(){return this.getBDFolder("plugins/")}static getThemesFolder(){return this.getBDFolder("themes/")}static addOnSwitchListener(e){n(2).remote.getCurrentWebContents().on("did-navigate-in-page",e)}static removeOnSwitchListener(e){n(2).remote.getCurrentWebContents().removeListener("did-navigate-in-page",e)}static addStyle(e,t){document.head.append(Kt.createElement(`<style id="${e}">${t}</style>`))}static removeStyle(e){const t=document.getElementById(e);t&&t.remove()}static addScript(e,t){return new Promise(n=>{const r=document.createElement("script");r.id=e,r.src=t,r.type="text/javascript",r.onload=n,document.head.append(r)})}static removeScript(e){const t=document.getElementById(e);t&&t.remove()}static async getContextMenu(e){return ct.getDiscordMenu(e)}static forceUpdateContextMenus(){return ct.forceUpdateMenus()}}var dt=class{constructor(){this.listeners=[]}addListener(e){if("function"==typeof e)return this.listeners.push(e),()=>{this.listeners.splice(this.listeners.indexOf(e),1)}}removeListener(e){"function"==typeof e&&this.listeners.splice(this.listeners.indexOf(e),1)}alertListeners(...e){for(let t=0;t<this.listeners.length;t++)this.listeners[t](...e)}};var ut=class extends dt{constructor(e,t,n,r,s={}){super(),this.name=e,this.note=t,"function"==typeof n&&this.addListener(n),this.inputWrapper=Kt.parseHTML('<div class="plugin-input-container"></div>'),this.type="function"==typeof r?r:me.wrapElement(r),this.props=s,Kt.onAdded(this.getElement(),()=>{this.onAdded()}),Kt.onRemoved(this.getElement(),()=>{this.onRemoved()})}getElement(){return this.inputWrapper}onChange(){this.alertListeners(...arguments)}onAdded(){const e=u.ReactDOM.render(u.React.createElement(ht,Object.assign({title:this.name,type:this.type,note:this.note},this.props)),this.getElement());this.props.onChange&&(e.props.onChange=this.props.onChange(e)),e.forceUpdate()}onRemoved(){u.ReactDOM.unmountComponentAtNode(this.getElement())}};class ht extends u.React.Component{constructor(e){super(e)}get noteElement(){const e=this.props.noteOnTop?we.Margins.marginBottom8:we.Margins.marginTop8;return u.React.createElement(u.SettingsNote,{children:this.props.note,type:"description",className:e.toString()})}get dividerElement(){return u.React.createElement("div",{className:we.Dividers.divider.add(we.Dividers.dividerDefault).toString()})}render(){const e=u.React.createElement(this.props.type,this.props);return u.React.createElement(u.SettingsWrapper,{className:we.Margins.marginBottom20.toString(),title:this.props.title,children:[this.props.noteOnTop?this.noteElement:e,this.props.noteOnTop?e:this.noteElement,this.dividerElement]})}}class gt extends dt{constructor(e,t={}){super();const{collapsible:n=!0,shown:r=!1,callback:s=(()=>{})}=t;this.addListener(s),this.onChange=this.onChange.bind(this);const i=r||!n?"":"collapsed",o=Kt.parseHTML(`<div class="plugin-input-group">\n\t\t\t\t\t\t\t\t\t\t\t<h2 class="${we.Titles.h5} ${we.Titles.defaultMarginh5} ${we.Titles.defaultColor}">\n\t\t\t\t\t\t\t\t\t\t\t<span class="button-collapse ${i}"></span> ${e}\n\t\t\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t\t\t<div class="plugin-inputs collapsible ${i}"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>`),a=o.querySelector("h2"),c=o.querySelector(".plugin-inputs");this.group=o,this.label=a,this.controls=c,n&&a.addEventListener("click",async()=>{const e=a.querySelector(".button-collapse"),t=e.classList.contains("collapsed");o.parentElement.querySelectorAll(":scope > .plugin-input-group > .collapsible:not(.collapsed)").forEach(e=>{e.style.setProperty("height",e.scrollHeight+"px"),e.classList.add("collapsed"),setImmediate(()=>{e.style.setProperty("height","")})}),o.parentElement.querySelectorAll(":scope > .plugin-input-group > h2 > .button-collapse").forEach(e=>e.classList.add("collapsed")),t&&(c.style.setProperty("height",c.scrollHeight+"px"),c.classList.remove("collapsed"),e.classList.remove("collapsed"),await new Promise(e=>setTimeout(e,300)),c.style.setProperty("height",""))})}getElement(){return this.group}append(...e){for(let t=0;t<e.length;t++)e[t]instanceof jQuery||e[t]instanceof Element?this.controls.append(e[t]):(e[t]instanceof ut||e[t]instanceof gt)&&this.controls.append(e[t].getElement()),e[t]instanceof ut?e[t].addListener((e=>t=>{this.onChange(e.id||e.name,t)})(e[t])):e[t]instanceof gt&&e[t].addListener((e=>(t,n)=>{this.onChange(e.id||e.name,t,n)})(e[t]));return this}appendTo(e){return e.append(this.group),this}onChange(){this.alertListeners(...arguments)}}var pt=gt;class mt extends dt{constructor(e,...t){super(),this.element=Kt.parseHTML('<div class="plugin-form-container"></div>'),"function"==typeof e&&this.addListener(e),this.onChange=this.onChange.bind(this),this.append(...t)}static build(e,...t){return new mt(e,...t).getElement()}getElement(){return this.element}append(...e){for(let t=0;t<e.length;t++)e[t]instanceof jQuery||e[t]instanceof Element?this.element.append(e[t]):(e[t]instanceof ut||e[t]instanceof pt)&&this.element.append(e[t].getElement()),e[t]instanceof ut?e[t].addListener((e=>t=>{this.onChange(e.id||e.name,t)})(e[t])):e[t]instanceof pt&&e[t].addListener((e=>(t,n)=>{this.onChange(e.id||e.name,t,n)})(e[t]));return this}onChange(){this.alertListeners(...arguments)}}var ft=mt;var yt=class extends ut{constructor(e,t,n,r,s={}){const{placeholder:i="",disabled:o=!1}=s;super(e,t,r,u.Textbox,{onChange:e=>t=>{e.props.value=t,e.forceUpdate(),this.onChange(t)},value:n,disabled:o,placeholder:i||""})}};const bt=[1752220,3066993,3447003,10181046,15277667,15844367,15105570,15158332,9807270,6323595,1146986,2067276,2123412,7419530,11342935,12745742,11027200,10038562,9936031,5533306];var Ct=class extends ut{constructor(e,t,n,r,s={}){super(e,t,r,u.ColorPicker,{disabled:!!s.disabled,onChange:e=>t=>{e.props.value=t,e.forceUpdate(),this.onChange(m.int2hex(t))},colors:Array.isArray(s.colors)?s.colors:bt,defaultColor:"number"==typeof n?n:m.hex2int(n),value:0})}static get presetColors(){return bt}};var Pt=class extends ut{constructor(e,t,n,r={}){const s=we.BasicInputs.inputDefault.add("file-input");r.disabled&&s.add(we.BasicInputs.disabled);const i=Kt.parseHTML(`<input type="file" class="${s}">`);r.disabled&&i.setAttribute("disabled",""),r.multiple&&i.setAttribute("multiple",""),r.accept&&i.setAttribute("accept",Array.isArray(r.accept)?r.accept.join(","):r.accept),i.addEventListener("change",e=>{this.onChange(e.target.files[0])}),super(e,t,n,i)}};var vt=class extends ut{constructor(e,t,n,r,s,i,o={}){const a={onChange:e=>e,initialValue:s,disabled:!!o.disabled,minValue:n,maxValue:r,handleSize:10};o.fillStyles&&(a.fillStyles=o.fillStyles),o.markers&&(a.markers=o.markers),o.stickToMarkers&&(a.stickToMarkers=o.stickToMarkers),void 0!==o.equidistant&&(a.equidistant=o.equidistant),super(e,t,i,u.Slider,Object.assign(a,{onValueChange:e=>this.onChange(e)}))}};var St=class extends ut{constructor(e,t,n,r,s={}){super(e,t,r),this.disabled=!!s.disabled,this.value=!!n}onAdded(){const e=u.ReactDOM.render(u.React.createElement(u.SwitchRow,{children:this.name,note:this.note,disabled:this.disabled,hideBorder:!1,value:this.value,onChange:t=>{const n=t.currentTarget.checked;e.props.value=n,e.forceUpdate(),this.onChange(n)}}),this.getElement())}};var Mt=class extends ut{constructor(e,t,n,r,s,i={}){const{clearable:o=!1,searchable:a=!1,disabled:c=!1}=i;super(e,t,s,u.Dropdown,{clearable:o,searchable:a,disabled:c,options:r,onChange:e=>t=>{e.props.value=t.value,e.forceUpdate(),this.onChange(t.value)},value:n})}};var wt=class extends ut{constructor(e,t,n,r,s={}){const{disabled:i=!1}=s;super(e,t,r,u.Keybind,{disabled:i,defaultValue:n.map(e=>[0,e]),onChange:e=>t=>{Array.isArray(t)&&(e.props.value=t,this.onChange(t.map(e=>e[1])))}})}};var Et=class extends ut{constructor(e,t,n,r,s,i={}){super(e,t,s,u.RadioGroup,{noteOnTop:!0,disabled:!!i.disabled,options:r,onChange:e=>t=>{e.props.value=t.value,e.forceUpdate(),this.onChange(t.value)},value:n})}};const It=n(5);function xt(e){if(!(e instanceof window.jQuery||e instanceof Element))return;const t=me.getReactProperty(e,"return.return.return.stateNode.updatePosition");t&&t()}class Ot{constructor(e=!1,t=!1){this.theme="dark"==u.UserSettingsStore.theme?"theme-dark":"theme-light",this.isSubmenu=e,this.element=Kt.createElement(`<div class="${we.ContextMenu.contextMenu} plugin-context-menu ${this.theme}"></div>`),this.scroll=t,t&&(this.scroller=Kt.createElement(`<div class="${we.Scrollers.scroller} ${we.ContextMenu.scroller}"></div>`),this.scrollerWrap=Kt.createElement(`<div class="${we.Scrollers.scrollerWrap} ${we.Scrollers.scrollerThemed} ${we.Scrollers.themeGhostHairline}"></div>`),this.scrollerWrap.append(this.scroller),this.element.append(this.scrollerWrap))}addGroup(e){return this.scroll?this.scroller.append(e.getElement()):this.element.append(e.getElement()),this}addItems(...e){for(let t=0;t<e.length;t++)this.scroll?this.scroller.append(e[t].getElement()):this.element.append(e[t].getElement());return this}show(e,t){const n=e,r=t,s=this.element.parents(this.parentSelector).length,i=Kt.createElement(`<div class="${we.TooltipLayers.layer}"></div>`);let o=this.element;if(this.isSubmenu){const e=Kt.createElement(`<div class="${we.ContextMenu.subMenuContext}"></div>`);e.append(this.element),o=e}i.append(o),i.appendTo(Pe.Popouts.popouts.sibling(Pe.TooltipLayers.layerContainer).toString()),this.element.css("top",r+"px").css("left",n+"px"),r+this.element.outerHeight()>=y.height&&(this.element.addClass("invertY").addClass(we.ContextMenu.invertY),this.element.css("top",`${r-this.element.outerHeight()}px`),s>0&&this.element.css("top",`${r+this.element.parent().outerHeight()-this.element.outerHeight()}px`)),this.element.offset().left+this.element.outerWidth()>=y.width&&(this.element.addClass("invertX"),this.element.css("left",`${n-this.element.outerWidth()}px`)),this.element.offset().left+2*this.element.outerWidth()>=y.width&&this.element.addClass(we.ContextMenu.invertChildX),0===s&&(Kt.on(document,"mousedown.zctx",e=>{this.element.contains(e.target)||this.element.isSameNode(e.target)||this.removeMenu()}),Kt.on(document,"click.zctx",e=>{this.element.contains(e.target)&&this.removeMenu()}),Kt.on(document,"keyup.zctx",e=>{27===e.keyCode&&this.removeMenu()}))}removeMenu(){this.element.parents(Pe.TooltipLayers.layer.toString())[0].remove();const e=this.element.findAll(this.parentSelector);e&&e.forEach(e=>e.remove()),Kt.off(document,".zctx")}attachTo(e){this.menuItem=$(e),e.on("mouseenter",()=>{this.show(parseInt(e.offset().right),parseInt(e.offset().top))}),e.on("mouseleave",()=>{this.element.parents(Pe.TooltipLayers.layer.toString())[0].remove()})}get parentSelector(){return this.element.parents(".plugin-context-menu").length>this.element.parents(Pe.ContextMenu.contextMenu).length?".plugin-context-menu":Pe.ContextMenu.contextMenu}}class At{constructor(){this.element=Kt.createElement(`<div class="${we.ContextMenu.itemGroup}"></div>`)}addItems(...e){for(let t=0;t<e.length;t++)this.element.append(e[t].getElement());return this}getElement(){return this.element}}class Nt{constructor(e,t={}){const{danger:n=!1,callback:r}=t;this.element=Kt.createElement(`<div class="${we.ContextMenu.item}"></div>`),this.label=e,n&&this.element.addClass(we.ContextMenu.danger),this.element.on("click",e=>{(Array.from(this.element.children).some(t=>t.isSameNode(e.target))||this.element.isSameNode(e.target))&&("function"==typeof r?r(e):e.stopPropagation())})}getElement(){return this.element}}class Bt extends Nt{constructor(e,t={}){super(e,t);const{hint:n=""}=t;this.element.append(Kt.createElement(`<span>${e}</span>`)),this.element.append(Kt.createElement(`<div class="${we.ContextMenu.hint}">${n}</div>`))}}class jt extends Nt{constructor(e,t,n={}){super(e,n),this.element.addClass(we.ContextMenu.itemImage),this.element.append(Kt.createElement(`<div class="${we.ContextMenu.label}">${e}</div>`)),this.element.append(Kt.createElement(`<img src="${t}">`))}}class kt extends Nt{constructor(e,t,n={}){super(e,n),this.element.addClass(we.ContextMenu.itemSubMenu),this.element.append(Kt.createElement(`<div class="${we.ContextMenu.label}">${e}</div>`)),this.element.append(Kt.createElement('<svg class="caret-UIZBlm da-caret" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M16.59 8.59004L12 13.17L7.41 8.59004L6 10L12 16L18 10L16.59 8.59004Z"></path></svg>')),this.subMenu=t,this.subMenu.attachTo(this.getElement())}}class Tt extends Nt{constructor(e,t,n={}){const{callback:r}=n;n.callback&&delete n.callback,super(e,n),this.element.addClass(we.ContextMenu.itemToggle),this.element.append(Kt.createElement(`<div class="${we.ContextMenu.label}">${e}</div>`)),this.checkbox=Kt.createElement(`<div class="checkbox ${we.Checkbox.checkbox} ${we.ContextMenu.checkbox}" role="button"></div>`),this.checkbox.append(Kt.createElement(`<div class="checkbox-inner ${we.Checkbox.checkboxInner}"></div>`)),this.checkbox.append(Kt.createElement("<span>")),this.input=Kt.createElement(`<input type="checkbox" class="${we.Checkbox.checkboxElement}">`),this.input.checked=t,this.checkbox.find(".checkbox-inner").append(this.input),this.checkbox.find(".checkbox-inner").append(Kt.createElement("<span>")),this.element.append(this.checkbox),this.element.on("click",e=>{(Array.from(this.element.children).some(t=>t.isSameNode(e.target))||this.element.isSameNode(e.target))&&(e.stopPropagation(),this.input.checked=!this.input.checked,"function"==typeof r&&r(this.input.checked))})}}var Lt=function(e){return`<svg width="${e||24}" height="${e||24}" viewBox="0 0 24 24">\n            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />\n        </svg>`},Rt=function(e){return`<svg width="${e||24}" height="${e||24}" viewBox="0 0 24 24">\n                <path d="M0 0h24v24H0z" fill="none"/>\n                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>\n            </svg>`},Ut=function(e){return`<svg width="${e||24}" height="${e||24}" viewBox="0 0 24 24">\n                <path d="M0 0h24v24H0z" fill="none"/>\n                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>\n            </svg>`},_t=function(e){return`<svg width="${e||24}" height="${e||24}" viewBox="0 0 24 24">\n                <path d="M0 0h24v24H0z" fill="none"/>\n                <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>\n            </svg>`};const Dt=function(e){const t=e[0].toUpperCase()+e.slice(1),n=we.Tooltips[`tooltip${t}`];return n||null},Gt=function(e){return!!Dt(e)},Ht=function(e){return`${e}px`};class Ft{constructor(e,t,n={}){const{style:r="black",side:s="top",preventFlip:i=!1,disabled:o=!1}=n;return this.node=e instanceof jQuery?e[0]:e,this.label=t,this.style=r.toLowerCase(),this.side=s.toLowerCase(),this.preventFlip=i,this.disabled=o,Gt(this.side)?Gt(this.style)?(this.element=Kt.createElement(`<div class="${we.TooltipLayers.layer}">`),this.tooltipElement=Kt.createElement(`<div class="${we.Tooltips.tooltip} ${Dt(this.style)}"><div class="${we.Tooltips.tooltipPointer}"></div>${this.label}</div>`),this.labelElement=this.tooltipElement.childNodes[1],this.element.append(this.tooltipElement),this.node.addEventListener("mouseenter",()=>{if(this.disabled)return;this.show();const e=new MutationObserver(t=>{t.forEach(t=>{const n=Array.from(t.removedNodes),r=n.indexOf(this.node)>-1,s=n.some(e=>e.contains(this.node));(r||s)&&(this.hide(),e.disconnect())})});e.observe(document.body,{subtree:!0,childList:!0})}),void this.node.addEventListener("mouseleave",()=>{this.hide()})):l.err("EmulatedTooltip",`Style ${this.style} does not exist.`):l.err("EmulatedTooltip",`Side ${this.side} does not exist.`)}get container(){return document.querySelector(Pe.Popouts.popouts.sibling(Pe.TooltipLayers.layerContainer))}get canShowAbove(){return this.node.offset().top-this.element.outerHeight()>=0}get canShowBelow(){return this.node.offset().top+this.node.outerHeight()+this.element.outerHeight()<=y.height}get canShowLeft(){return this.node.offset().left-this.element.outerWidth()>=0}get canShowRight(){return this.node.offset().left+this.node.outerWidth()+this.element.outerWidth()<=y.width}hide(){this.element.remove(),this.tooltipElement.className=this._className}show(){this.tooltipElement.className=`${we.Tooltips.tooltip} ${Dt(this.style)}`,this.labelElement.textContent=this.label,this.element.appendTo(this.container),"top"==this.side&&(this.canShowAbove||!this.canShowAbove&&this.preventFlip?this.showAbove():this.showBelow()),"bottom"==this.side&&(this.canShowBelow||!this.canShowBelow&&this.preventFlip?this.showBelow():this.showAbove()),"left"==this.side&&(this.canShowLeft||!this.canShowLeft&&this.preventFlip?this.showLeft():this.showRight()),"right"==this.side&&(this.canShowRight||!this.canShowRight&&this.preventFlip?this.showRight():this.showLeft())}showAbove(){this.tooltipElement.addClass(Dt("top")),this.element.css("top",Ht(this.node.offset().top-this.element.outerHeight()-10)),this.centerHorizontally()}showBelow(){this.tooltipElement.addClass(Dt("bottom")),this.element.css("top",Ht(this.node.offset().top+this.node.outerHeight()+10)),this.centerHorizontally()}showLeft(){this.tooltipElement.addClass(Dt("left")),this.element.css("left",Ht(this.node.offset().left-this.element.outerWidth()-10)),this.centerVertically()}showRight(){this.tooltipElement.addClass(Dt("right")),this.element.css("left",Ht(this.node.offset().left+this.node.outerWidth()+10)),this.centerVertically()}centerHorizontally(){const e=this.node.offset().left+this.node.outerWidth()/2;this.element.css("left",Ht(e-this.element.outerWidth()/2))}centerVertically(){const e=this.node.offset().top+this.node.outerHeight()/2;this.element.css("top",Ht(e-this.element.outerHeight()/2))}}class $t{static get CSS(){return n(6)}static async success(e,t={}){return this.show(e,Object.assign(t,{type:"success"}))}static async info(e,t={}){return this.show(e,Object.assign(t,{type:"info"}))}static async warning(e,t={}){return this.show(e,Object.assign(t,{type:"warning"}))}static async error(e,t={}){return this.show(e,Object.assign(t,{type:"error"}))}static async default(e,t={}){return this.show(e,Object.assign(t,{type:"default"}))}static async show(e,t={}){const{type:n="",icon:r="",timeout:s=3e3}=t;this.ensureContainer();const i=Kt.parseHTML(this.buildToast(e,this.parseType(n),r));document.querySelector(".toasts").appendChild(i),await new Promise(e=>setTimeout(e,s)),i.classList.add("closing"),await new Promise(e=>setTimeout(e,300)),i.remove(),document.querySelectorAll(".toasts .toast").length||document.querySelector(".toasts").remove()}static buildToast(e,t,n){const r=t||n,s=`toast ${r?"toast-has-icon":""} ${t&&"default"!=t?`toast-${t}`:""}`;return!n&&t&&(n=t),d.formatString('<div class="{{className}}">{{icon}}<div class="toast-text">{{message}}</div></div>',{className:s,icon:r?this.getIcon(n):"",message:e})}static getIcon(e){let t=`<img src="${e}" width="20" height="20" />`;switch(e){case"success":t=i.IconSuccess(20);break;case"warning":t=i.IconWarning(20);break;case"info":t=i.IconInfo(20);break;case"error":t=i.IconError(20)}return d.formatString('<div class="toast-icon">{{icon}}</div>',{icon:t})}static ensureContainer(){if(document.querySelector(".toasts"))return;const e=Pe.ChannelList.sidebar,t=e?document.querySelector(e.adjacent("div")):null,n=t?t.querySelector(Pe.MemberList.membersWrap):null,r=t?t.querySelector("form"):null,s=t?t.getBoundingClientRect().left:310,i=n?n.getBoundingClientRect().left:0,o=i?i-t.getBoundingClientRect().left:t.offsetWidth,a=r?r.offsetHeight:80,c=document.createElement("div");c.classList.add("toasts"),c.style.setProperty("left",s+"px"),c.style.setProperty("width",o+"px"),c.style.setProperty("bottom",a+"px"),document.querySelector("#app-mount").appendChild(c)}static parseType(e){return this.ToastTypes.hasOwnProperty(e)?this.ToastTypes[e]:""}static get ToastTypes(){return{default:"",error:"error",success:"success",warning:"warning",info:"info"}}}const Wt=u.React.createElement,zt=g.getByDisplayName("Markdown");class Vt{static get ModalSizes(){return u.ConfirmationModal.Sizes}static showUserProfile(e){return u.UserProfileModal.open(e)}static showConfirmationModal(e,t,n={}){this.showModal(e,Wt(zt,null,t),n)}static showAlertModal(e,t){u.ModalStack.push((function(n){return Wt(u.AlertModal,Object.assign({title:e,body:t},n))}))}static showModal(e,t,n={}){const{danger:r=!1,confirmText:s="Okay",cancelText:i="Cancel",onConfirm:o=(()=>{}),onCancel:a=(()=>{}),size:c=this.ModalSizes.SMALL}=n;u.ModalStack.push((function(n){return Wt(u.ConfirmationModal,Object.assign({header:e,red:r,size:c,confirmText:s,cancelText:i,onConfirm:o,onCancel:a,children:Array.isArray(t)?t:[t]},n))}))}static showChangelogModal(e,t,n,r){const s=u.TextElement,i=[];for(let e=0;e<n.length;e++){const t=n[e],r=we.Changelog[t.type]?we.Changelog[t.type]:we.Changelog.added,s=0==e?we.Changelog.marginTop:"";i.push(Wt("h1",{className:`${r} ${s}`},t.title));const o=Wt("ul",null,t.items.map(e=>Wt("li",null,Wt(zt,null,e))));i.push(o)}const o=function(){return Wt(u.FlexChild.Child,{grow:1,shrink:1},Wt(u.Titles.default,{tag:u.Titles.Tags.H4},e),Wt(s.default,{size:s.Sizes.SMALL,color:s.Colors.PRIMARY,className:we.Changelog.date.toString()},"Version "+t))},a=r?function(){return Wt(zt,null,r)}:null;u.ModalStack.push((function(e){return Wt(u.Changelog,Object.assign({className:we.Changelog.container.toString(),selectable:!0,onScroll:e=>e,onClose:e=>e,renderHeader:o,renderFooter:a,children:i},e))}))}}class qt{static get CSS(){return n(7)}static checkForUpdate(e,t,n,r,s){let i="https://raw.githubusercontent.com/rauenzi/BetterDiscordAddons/master/Plugins/"+e+"/"+e+".plugin.js";n&&(i=n),"function"!=typeof r&&(r=this.defaultVersioner),"function"!=typeof s&&(s=this.defaultComparator),void 0===window.PluginUpdates&&(window.PluginUpdates={plugins:{},checkAll:function(){for(const e in this.plugins){const t=this.plugins[e];t.versioner||(t.versioner=qt.defaultVersioner),t.comparator||(t.comparator=qt.defaultComparator),qt.processUpdateCheck(t.name,t.raw)}},interval:setInterval(()=>{window.PluginUpdates.checkAll()},72e5)},this.patchPluginList()),window.PluginUpdates.plugins[i]={name:e,raw:i,version:t,versioner:r,comparator:s},qt.processUpdateCheck(e,i)}static processUpdateCheck(e,t){n(3)(t,(n,r,s)=>{if(n)return;const i=window.PluginUpdates.plugins[t].versioner(s);window.PluginUpdates.plugins[t].comparator(window.PluginUpdates.plugins[t].version,i)?this.showUpdateNotice(e,t):this.removeUpdateNotice(e)})}static defaultVersioner(e){const t=e.match(/['"][0-9]+\.[0-9]+\.[0-9]+['"]/i);return t?t.toString().replace(/['"]/g,""):"0.0.0"}static defaultComparator(e,t){return e=e.split(".").map(e=>parseInt(e)),(t=t.split(".").map(e=>parseInt(e)))[0]>e[0]||(t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>e[2])}static patchPluginList(){try{V2C_ContentColumn.prototype}catch(e){return}ae.after("ZeresLibrary",V2C_ContentColumn.prototype,"componentDidMount",e=>{if("pcolumn"!=e._reactInternalFiber.key)return;const t=u.ReactDOM.findDOMNode(e);if(!t)return;const n=t.getElementsByClassName("bd-pfbtn")[0];n&&!n.nextElementSibling.classList.contains("bd-updatebtn")&&n.after(qt.createUpdateButton())});const e=document.getElementsByClassName("bd-pfbtn")[0];e&&e.textContent.toLowerCase().includes("plugin")&&!e.nextElementSibling.classList.contains("bd-updatebtn")&&e.after(qt.createUpdateButton())}static createUpdateButton(){const e=Kt.parseHTML('<button class="bd-pfbtn bd-updatebtn" style="left: 220px;">Check for Updates</button>');e.onclick=function(){window.PluginUpdates.checkAll()};const t=new Ft(e,"Checks for updates of plugins that support this feature. Right-click for a list.");return e.oncontextmenu=function(){window.PluginUpdates&&window.PluginUpdates.plugins&&(t.label=Object.values(window.PluginUpdates.plugins).map(e=>e.name).join(", "),t.side="bottom",t.show(),e.onmouseout=function(){t.label="Checks for updates of plugins that support this feature. Right-click for a list.",t.side="top"})},e}static downloadPlugin(e,t){const r=n(3),s=n(0),i=n(1);r(t,async(n,r,o)=>{if(n)return l.warn("PluginUpdates","Unable to get update for "+e);const a=window.PluginUpdates.plugins[t].versioner(o);let c=t.split("/");c=c[c.length-1];const d=i.join(lt.getPluginsFolder(),c);await new Promise(e=>s.writeFile(d,o,e)),$t.success(`${e} ${window.PluginUpdates.plugins[t].version} has been replaced by ${e} ${a}`),this.removeUpdateNotice(e);const u=window.bdplugins["Restart-No-More"]&&window.pluginCookie["Restart-No-More"],h=window.bdplugins["Restart No More"]&&window.pluginCookie["Restart No More"],g=window.settingsCookie["fork-ps-5"];if(!(u||h||g)){if(!window.PluginUpdates.downloaded){window.PluginUpdates.downloaded=[];const e=Kt.parseHTML(`<button class="btn btn-reload ${we.Notices.btn} ${we.Notices.button}">Reload</button>`),t=new Ft(e,window.PluginUpdates.downloaded.join(", "),{side:"top"});e.addEventListener("click",e=>{e.preventDefault(),window.location.reload(!1)}),e.addEventListener("mouseenter",()=>{t.label=window.PluginUpdates.downloaded.join(", ")}),document.getElementById("pluginNotice").append(e)}window.PluginUpdates.plugins[t].version=a,window.PluginUpdates.downloaded.push(e)}})}static showUpdateNotice(e,t){if(!document.getElementById("pluginNotice")){const e=Kt.parseHTML(`<div class="${we.Notices.notice} ${we.Notices.noticeInfo}" id="pluginNotice">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="${we.Notices.dismiss}" id="pluginNoticeDismiss"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="notice-message">The following plugins have updates:</span>&nbsp;&nbsp;<strong id="outdatedPlugins"></strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>`);Kt.query("[class*='app-'] > [class*='app-']").prepend(e),e.querySelector("#pluginNoticeDismiss").addEventListener("click",async()=>{e.classList.add("closing"),await new Promise(e=>setTimeout(e,400)),e.remove()})}const n=e+"-notice";if(document.getElementById(n))return;const r=Kt.parseHTML(`<span id="${n}">${e}</span>`);r.addEventListener("click",()=>{this.downloadPlugin(e,t)}),document.getElementById("outdatedPlugins").querySelectorAll("span").length&&document.getElementById("outdatedPlugins").append(Kt.createElement("<span class='separator'>, </span>")),document.getElementById("outdatedPlugins").append(r)}static removeUpdateNotice(e){if(!document.getElementById("outdatedPlugins"))return;const t=document.getElementById(e+"-notice");t&&(t.nextElementSibling&&t.nextElementSibling.matches(".separator")?t.nextElementSibling.remove():t.previousElementSibling&&t.previousElementSibling.matches(".separator")&&t.previousElementSibling.remove(),t.remove()),document.getElementById("outdatedPlugins").querySelectorAll("span").length||(document.querySelector("#pluginNotice .btn-reload")?document.querySelector("#pluginNotice .notice-message").textContent="To finish updating you need to reload.":document.getElementById("pluginNoticeDismiss").click())}}var Zt=function(e){return class{constructor(){if(this._config=e,this._enabled=!1,void 0!==e.defaultConfig){this.defaultSettings={};for(let t=0;t<e.defaultConfig.length;t++){const n=e.defaultConfig[t];if("category"!=n.type)this.defaultSettings[n.id]=n.value;else{this.defaultSettings[n.id]={};for(let e=0;e<n.settings.length;e++){const t=n.settings[e];this.defaultSettings[n.id][t.id]=t.value}}}this._hasConfig=!0,this.settings=d.deepclone(this.defaultSettings)}}getName(){return this._config.info.name.replace(" ","")}getDescription(){return this._config.info.description}getVersion(){return this._config.info.version}getAuthor(){return this._config.info.authors.map(e=>e.name).join(", ")}load(){const e=lt.loadData(this.getName(),"currentVersionInfo",{version:this.getVersion(),hasShownChangelog:!1});e.version==this.getVersion()&&e.hasShownChangelog||(this.showChangelog(),lt.saveData(this.getName(),"currentVersionInfo",{version:this.getVersion(),hasShownChangelog:!0})),qt.checkForUpdate(this.getName(),this.getVersion(),this._config.info.github_raw)}async start(){l.info(this.getName(),`version ${this.getVersion()} has started.`),this.defaultSettings&&(this.settings=this.loadSettings()),this._enabled=!0,"function"==typeof this.onStart&&this.onStart()}stop(){l.info(this.getName(),`version ${this.getVersion()} has stopped.`),this._enabled=!1,"function"==typeof this.onStop&&this.onStop()}get isEnabled(){return this._enabled}get strings(){if(!this._config.strings)return{};const e=u.UserSettingsStore.locale.split("-")[0];return this._config.strings.hasOwnProperty(e)?this._config.strings[e]:this._config.strings.hasOwnProperty("en")?this._config.strings.en:this._config.strings}set strings(e){this._config.strings=e}showSettingsModal(){"function"==typeof this.getSettingsPanel&&Vt.showModal(this.getName()+" Settings",me.createWrappedElement(this.getSettingsPanel()),{cancelText:"",confirmText:"Done",size:Vt.ModalSizes.MEDIUM})}showChangelog(e){void 0!==this._config.changelog&&Vt.showChangelogModal(this.getName()+" Changelog",this.getVersion(),this._config.changelog,e)}saveSettings(e){lt.saveSettings(this.getName(),this.settings?this.settings:e)}loadSettings(e){return lt.loadSettings(this.getName(),this.defaultSettings?this.defaultSettings:e)}buildSetting(e){const{name:t,note:n,type:r,value:s,onChange:i,id:o}=e;let a=null;if("color"==r)a=new Ct(t,n,s,i,{disabled:e.disabled,presetColors:e.presetColors});else if("dropdown"==r)a=new Mt(t,n,s,e.options,i);else if("file"==r)a=new Pt(t,n,i);else if("keybind"==r)a=new wt(t,n,s,i);else if("radio"==r)a=new Et(t,n,s,e.options,i,{disabled:e.disabled});else if("slider"==r){const r={};void 0!==e.markers&&(r.markers=e.markers),void 0!==e.stickToMarkers&&(r.stickToMarkers=e.stickToMarkers),a=new vt(t,n,e.min,e.max,s,i,r)}else"switch"==r?a=new St(t,n,s,i,{disabled:e.disabled}):"textbox"==r&&(a=new yt(t,n,s,i,{placeholder:e.placeholder||""}));return o&&(a.id=o),a}buildSettingsPanel(){const e=this._config.defaultConfig,t=e=>{const{name:t,id:n,collapsible:r,shown:s,settings:i}=e,o=[];for(let e=0;e<i.length;e++){const t=Object.assign({},i[e]);if(t.value=this.settings[n][t.id],t.onChange=e=>{this.settings[n][t.id]=e},Object.keys(this.strings).length&&this.strings.settings&&this.strings.settings[n]&&this.strings.settings[n][t.id]){const{name:e,note:r}=this.strings.settings[n][t.id];t.name=e,t.note=r}o.push(this.buildSetting(t))}const a=new pt(t,{shown:s,collapsible:r}).append(...o);return a.id=n,a},n=[];for(let r=0;r<e.length;r++){const s=Object.assign({},e[r]);if("category"!=s.type){if(s.value=this.settings[s.id],s.onChange=e=>{this.settings[s.id]=e},Object.keys(this.strings).length&&this.strings.settings&&this.strings.settings[s.id]){const{name:e,note:t}=this.strings.settings[s.id];s.name=e,s.note=t}n.push(this.buildSetting(s))}else n.push(t(s))}return new ft(this.saveSettings.bind(this),...n)}}};class Kt{static get Selector(){return b}static get ClassName(){return C}static get DOMObserver(){return P}static get observer(){return this._observer||(this._observer=new P)}static Q(e){const t=this.parseHTML(e);return(t instanceof NodeList?Array.from(t).some(e=>1===e.nodeType):1===t.nodeType)?t:this.query(e)}static query(e,t){return t||(t=document),t.querySelector(e)}static queryAll(e,t){return t||(t=document),t.querySelectorAll(e)}static parseHTML(e,t=!1){const n=document.createElement("template");n.innerHTML=e;const r=n.content.cloneNode(!0);return t?r:r.childNodes.length>1?r.childNodes:r.childNodes[0]}static createElement(e,t=!1){return this.parseHTML(e,t)}static escapeHTML(e){const t=document.createTextNode(""),n=document.createElement("span");return n.append(t),t.nodeValue=e,n.innerHTML}static addClass(e,...t){t=t.flat().filter(e=>e);for(let e=0;e<t.length;e++)t[e]=t[e].toString().split(" ");return t=t.flat().filter(e=>e),e.classList.add(...t),e}static removeClass(e,...t){for(let e=0;e<t.length;e++)t[e]=t[e].toString().split(" ");return t=t.flat().filter(e=>e),e.classList.remove(...t),e}static toggleClass(e,t,n){return t=t.toString().split(" ").filter(e=>e),void 0!==n?t.forEach(t=>e.classList.toggle(t,n)):t.forEach(t=>e.classList.toggle(t)),e}static hasClass(e,t){return t.toString().split(" ").filter(e=>e).every(t=>e.classList.contains(t))}static replaceClass(e,t,n){return e.classList.replace(t,n),e}static appendTo(e,t){return"string"==typeof t&&(t=this.query(t)),t?(t.append(e),e):null}static prependTo(e,t){return"string"==typeof t&&(t=this.query(t)),t?(t.prepend(e),e):null}static insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling),e}static after(e,t){return e.parentNode.insertBefore(t,e.nextSibling),e}static next(e,t=""){return t?e.querySelector("+ "+t):e.nextElementSibling}static nextAll(e){return e.querySelectorAll("~ *")}static nextUntil(e,t){const n=[];for(;e.nextElementSibling&&!e.nextElementSibling.matches(t);)n.push(e=e.nextElementSibling);return n}static previous(e,t=""){const n=e.previousElementSibling;return t?n&&n.matches(t)?n:null:n}static previousAll(e){const t=[];for(;e.previousElementSibling;)t.push(e=e.previousElementSibling);return t}static previousUntil(e,t){const n=[];for(;e.previousElementSibling&&!e.previousElementSibling.matches(t);)n.push(e=e.previousElementSibling);return n}static indexInParent(e){const t=e.parentNode.childNodes;let n=0;for(let r=0;r<t.length;r++){if(t[r]==e)return n;1==t[r].nodeType&&n++}return-1}static index(e){return this.indexInParent(e)}static parent(e,t=""){return!t||e.parentElement.matches(t)?e.parentElement:null}static findChild(e,t){return e.querySelector(":scope > "+t)}static findChildren(e,t){return e.querySelectorAll(":scope > "+t)}static parents(e,t=""){const n=[];if(t)for(;e.parentElement&&e.parentElement.closest(t);)n.push(e=e.parentElement.closest(t));else for(;e.parentElement;)n.push(e=e.parentElement);return n}static parentsUntil(e,t){const n=[];for(;e.parentElement&&!e.parentElement.matches(t);)n.push(e=e.parentElement);return n}static siblings(e,t="*"){return Array.from(e.parentElement.children).filter(n=>n!=e&&n.matches(t))}static css(e,t,n){return void 0===n?global.getComputedStyle(e)[t]:(e.style[t]=n,e)}static width(e,t){return void 0===t?parseInt(getComputedStyle(e).width):(e.style.width=t,e)}static height(e,t){return void 0===t?parseInt(getComputedStyle(e).height):(e.style.height=t,e)}static text(e,t){return void 0===t?e.textContent:e.textContent=t}static innerWidth(e){return e.clientWidth}static innerHeight(e){return e.clientHeight}static outerWidth(e){return e.offsetWidth}static outerHeight(e){return e.offsetHeight}static offset(e){return e.getBoundingClientRect()}static get listeners(){return this._listeners||(this._listeners={})}static on(e,t,n,r){const[s,i]=t.split("."),o=n&&r;r||(r=n);const a=o?function(e){e.target.matches(n)&&r(e)}:r;e.addEventListener(s,a);const c=()=>{e.removeEventListener(s,a)};if(i){this.listeners[i]||(this.listeners[i]=[]);const t=()=>{c(),this.listeners[i].splice(this.listeners[i].findIndex(t=>t.event==s&&t.element==e),1)};return this.listeners[i].push({event:s,element:e,cancel:t}),t}return c}static once(e,t,n,r){const[s,i]=t.split("."),o=n&&r;r||(r=n);const a=o?function(t){t.target.matches(n)&&(r(t),e.removeEventListener(s,a))}:function(t){r(t),e.removeEventListener(s,a)};e.addEventListener(s,a);const c=()=>{e.removeEventListener(s,a)};if(i){this.listeners[i]||(this.listeners[i]=[]);const t=()=>{c(),this.listeners[i].splice(this.listeners[i].findIndex(t=>t.event==s&&t.element==e),1)};return this.listeners[i].push({event:s,element:e,cancel:t}),t}return c}static __offAll(e,t){const[n,r]=e.split(".");let s=e=>e.event==n,i=e=>e;t&&(s=e=>e.event==n&&e.element==t,i=e=>e.element==t);const o=this.listeners[r]||[],a=n?o.filter(s):o.filter(i);for(let e=0;e<a.length;e++)a[e].cancel()}static off(e,t,n,r){if("string"==typeof e)return this.__offAll(e);const[s,i]=t.split(".");if(i)return this.__offAll(t,e);const o=n&&r;r||(r=n);const a=o?function(e){e.target.matches(n)&&r(e)}:r;return e.removeEventListener(s,a),e}static onMountChange(e,t,n=!0){const r=()=>{this.observer.unsubscribe(r),t()};return this.observer.subscribe(r,t=>{const r=Array.from(n?t.addedNodes:t.removedNodes),s=r.indexOf(e)>-1,i=r.some(t=>t.contains(e));return s||i}),e}static onMount(e,t){return this.onMountChange(e,t)}static onUnmount(e,t){return this.onMountChange(e,t,!1)}static onAdded(e,t){return this.onMount(e,t)}static onRemoved(e,t){return this.onUnmount(e,t,!1)}static wrap(e){const t=this.parseHTML('<div class="dom-wrapper"></div>');for(let n=0;n<e.length;n++)t.appendChild(e[n]);return t}static resolveElement(e){if(e instanceof jQuery||e instanceof Element)return e instanceof jQuery?e[0]:e}}d.addToPrototype(HTMLElement,"addClass",(function(...e){return Kt.addClass(this,...e)})),d.addToPrototype(HTMLElement,"removeClass",(function(...e){return Kt.removeClass(this,...e)})),d.addToPrototype(HTMLElement,"toggleClass",(function(e,t){return Kt.toggleClass(this,e,t)})),d.addToPrototype(HTMLElement,"replaceClass",(function(e,t){return Kt.replaceClass(this,e,t)})),d.addToPrototype(HTMLElement,"hasClass",(function(e){return Kt.hasClass(this,e)})),d.addToPrototype(HTMLElement,"insertAfter",(function(e){return Kt.insertAfter(this,e)})),d.addToPrototype(HTMLElement,"after",(function(e){return Kt.after(this,e)})),d.addToPrototype(HTMLElement,"next",(function(e=""){return Kt.next(this,e)})),d.addToPrototype(HTMLElement,"nextAll",(function(){return Kt.nextAll(this)})),d.addToPrototype(HTMLElement,"nextUntil",(function(e){return Kt.nextUntil(this,e)})),d.addToPrototype(HTMLElement,"previous",(function(e=""){return Kt.previous(this,e)})),d.addToPrototype(HTMLElement,"previousAll",(function(){return Kt.previousAll(this)})),d.addToPrototype(HTMLElement,"previousUntil",(function(e){return Kt.previousUntil(this,e)})),d.addToPrototype(HTMLElement,"index",(function(){return Kt.index(this)})),d.addToPrototype(HTMLElement,"findChild",(function(e){return Kt.findChild(this,e)})),d.addToPrototype(HTMLElement,"findChildren",(function(e){return Kt.findChildren(this,e)})),d.addToPrototype(HTMLElement,"parent",(function(e){return Kt.parent(this,e)})),d.addToPrototype(HTMLElement,"parents",(function(e=""){return Kt.parents(this,e)})),d.addToPrototype(HTMLElement,"parentsUntil",(function(e){return Kt.parentsUntil(this,e)})),d.addToPrototype(HTMLElement,"siblings",(function(e="*"){return Kt.siblings(this,e)})),d.addToPrototype(HTMLElement,"css",(function(e,t){return Kt.css(this,e,t)})),d.addToPrototype(HTMLElement,"width",(function(e){return Kt.width(this,e)})),d.addToPrototype(HTMLElement,"height",(function(e){return Kt.height(this,e)})),d.addToPrototype(HTMLElement,"innerWidth",(function(){return Kt.innerWidth(this)})),d.addToPrototype(HTMLElement,"innerHeight",(function(){return Kt.innerHeight(this)})),d.addToPrototype(HTMLElement,"outerWidth",(function(){return Kt.outerWidth(this)})),d.addToPrototype(HTMLElement,"outerHeight",(function(){return Kt.outerHeight(this)})),d.addToPrototype(HTMLElement,"offset",(function(){return Kt.offset(this)})),d.addToPrototype(HTMLElement,"text",(function(e){return Kt.text(this,e)})),d.addToPrototype(HTMLElement,"on",(function(e,t,n){return Kt.on(this,e,t,n)})),d.addToPrototype(HTMLElement,"once",(function(e,t,n){return Kt.once(this,e,t,n)})),d.addToPrototype(HTMLElement,"off",(function(e,t,n){return Kt.off(this,e,t,n)})),d.addToPrototype(HTMLElement,"find",(function(e){return Kt.query(e,this)})),d.addToPrototype(HTMLElement,"findAll",(function(e){return Kt.queryAll(e,this)})),d.addToPrototype(HTMLElement,"appendTo",(function(e){return Kt.appendTo(this,e)})),d.addToPrototype(HTMLElement,"onAdded",(function(e){return Kt.onAdded(this,e)})),d.addToPrototype(HTMLElement,"onRemoved",(function(e){return Kt.onRemoved(this,e)}));class Qt{static get InsufficientPermissions(){return S}static get List(){return f}static get User(){return re}static get Channel(){return _}static get Guild(){return te}static get Message(){return O}static get UserSettings(){return oe}static get guilds(){const e=u.GuildStore.getGuilds();return f.from(Object.values(e),e=>te.from(e))}static get channels(){const e=u.ChannelStore.getChannels();return f.from(Object.values(e),e=>_.from(e))}static get users(){const e=u.UserStore.getUsers();return f.from(Object.values(e),e=>re.from(e))}static get memberCounts(){return u.MemberCountStore.getMemberCounts()}static get sortedGuilds(){const e=u.SortedGuildStore.getSortedGuilds();return f.from(e,e=>te.from(e))}static get guildPositions(){return u.SortedGuildStore.guildPositions}static get currentGuild(){const e=u.GuildStore.getGuild(u.SelectedGuildStore.getGuildId());return e?te.from(e):null}static get currentChannel(){const e=u.ChannelStore.getChannel(u.SelectedChannelStore.getChannelId());return e?_.from(e):null}static get currentUser(){const e=u.UserStore.getCurrentUser();return e?re.from(e):null}static get friends(){const e=u.RelationshipStore.getFriendIDs();return f.from(e,e=>re.fromId(e))}}const Jt={};Jt.DiscordContextMenu=ct,Jt.DCM=ct,Jt.ContextMenu=s,Jt.Tooltip=class{constructor(e,t,n={}){if(!(e instanceof jQuery||e instanceof Element))return;this.node=e instanceof jQuery?e[0]:e;const{style:r="black",side:s="top",disabled:i=!1}=n;this.label=t,this.style=r,this.side=s,this.disabled=i,this.id=u.KeyGenerator(),this.node.addEventListener("mouseenter",()=>{if(this.disabled)return;this.show();const e=new MutationObserver(t=>{t.forEach(t=>{const n=Array.from(t.removedNodes),r=n.indexOf(this.node)>-1,s=n.some(e=>e.contains(this.node));(r||s)&&(this.hide(),e.disconnect())})});e.observe(document.body,{subtree:!0,childList:!0})}),this.node.addEventListener("mouseleave",()=>{this.hide()})}disable(){this.disabled=!0}enable(){this.disabled=!1}hide(){u.Tooltips.hide(this.id)}show(){const{left:e,top:t,width:n,height:r}=this.node.getBoundingClientRect();u.Tooltips.show(this.id,{position:this.side,text:this.label,color:this.style,targetWidth:n,targetHeight:r,windowWidth:y.width,windowHeight:y.height,x:e,y:t})}},Jt.EmulatedTooltip=Ft,Jt.Toasts=$t,Jt.Settings=r,Jt.Popouts=class{static showUserPopout(e,t,n={}){const{guild:r=u.SelectedGuildStore.getGuildId(),channel:s=u.SelectedChannelStore.getChannelId()}=n;let{position:i="right"}=n;(e=Kt.resolveElement(e)).getBoundingClientRect().right+250>=y.width&&(i="left"),u.PopoutOpener.openPopout(e,{position:i,offsetX:0,offsetY:0,animationType:"default",preventInvert:!1,zIndexBoost:0,closeOnScroll:!1,shadow:!1,backdrop:!1,toggleClose:!0,render:e=>u.React.createElement(u.UserPopout,Object.assign({},e,{userId:t.id,guildId:r,channelId:s}))},"ZeresLibrary")}},Jt.Modals=Vt;for(const e in a)Jt[e]=a[e];const Yt=n(8),Xt=n(9),en=Xt.default?Xt.default:Xt;t.default=en(Jt.Structs.Plugin(Yt),Jt)}]).default;
/*@end@*/